function cov_1boptpdvjn(){var path="/Users/doudou/COMP0016_2020_21_Team8/AvabotTeam8-src/dialogs/docDialog.js";var hash="802e1232a3270b072a13609a1154406f080c23c6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/doudou/COMP0016_2020_21_Team8/AvabotTeam8-src/dialogs/docDialog.js",statementMap:{"0":{start:{line:4,column:14},end:{line:4,column:30}},"1":{start:{line:11,column:4},end:{line:11,column:33}},"2":{start:{line:12,column:19},end:{line:12,column:31}},"3":{start:{line:13,column:25},end:{line:13,column:43}},"4":{start:{line:14,column:20},end:{line:14,column:33}},"5":{start:{line:15,column:22},end:{line:15,column:37}},"6":{start:{line:19,column:4},end:{line:19,column:22}},"7":{start:{line:20,column:4},end:{line:20,column:25}},"8":{start:{line:21,column:4},end:{line:21,column:18}},"9":{start:{line:22,column:4},end:{line:22,column:19}},"10":{start:{line:23,column:4},end:{line:23,column:20}},"11":{start:{line:24,column:4},end:{line:24,column:23}},"12":{start:{line:26,column:4},end:{line:26,column:48}},"13":{start:{line:27,column:4},end:{line:27,column:52}},"14":{start:{line:28,column:4},end:{line:34,column:6}},"15":{start:{line:36,column:4},end:{line:36,column:44}},"16":{start:{line:40,column:4},end:{line:69,column:5}},"17":{start:{line:41,column:6},end:{line:49,column:9}},"18":{start:{line:51,column:6},end:{line:51,column:78}},"19":{start:{line:52,column:6},end:{line:54,column:21}},"20":{start:{line:55,column:6},end:{line:57,column:20}},"21":{start:{line:58,column:6},end:{line:60,column:24}},"22":{start:{line:61,column:6},end:{line:68,column:9}},"23":{start:{line:73,column:4},end:{line:73,column:35}},"24":{start:{line:74,column:19},end:{line:74,column:36}},"25":{start:{line:75,column:4},end:{line:101,column:5}},"26":{start:{line:76,column:6},end:{line:80,column:7}},"27":{start:{line:77,column:8},end:{line:77,column:50}},"28":{start:{line:79,column:8},end:{line:79,column:65}},"29":{start:{line:81,column:11},end:{line:101,column:5}},"30":{start:{line:82,column:6},end:{line:90,column:7}},"31":{start:{line:83,column:8},end:{line:87,column:9}},"32":{start:{line:84,column:10},end:{line:84,column:71}},"33":{start:{line:86,column:10},end:{line:86,column:53}},"34":{start:{line:89,column:8},end:{line:89,column:69}},"35":{start:{line:91,column:11},end:{line:101,column:5}},"36":{start:{line:92,column:6},end:{line:98,column:7}},"37":{start:{line:93,column:8},end:{line:95,column:11}},"38":{start:{line:97,column:8},end:{line:97,column:75}},"39":{start:{line:100,column:6},end:{line:100,column:36}},"40":{start:{line:103,column:4},end:{line:105,column:7}},"41":{start:{line:109,column:19},end:{line:109,column:30}},"42":{start:{line:110,column:4},end:{line:110,column:67}},"43":{start:{line:111,column:4},end:{line:111,column:41}},"44":{start:{line:112,column:17},end:{line:120,column:8}},"45":{start:{line:116,column:10},end:{line:116,column:77}},"46":{start:{line:119,column:8},end:{line:119,column:27}},"47":{start:{line:121,column:4},end:{line:121,column:44}},"48":{start:{line:122,column:4},end:{line:124,column:7}},"49":{start:{line:128,column:20},end:{line:128,column:22}},"50":{start:{line:129,column:14},end:{line:129,column:15}},"51":{start:{line:130,column:4},end:{line:134,column:5}},"52":{start:{line:131,column:6},end:{line:131,column:45}},"53":{start:{line:132,column:6},end:{line:132,column:54}},"54":{start:{line:133,column:6},end:{line:133,column:12}},"55":{start:{line:135,column:4},end:{line:135,column:21}},"56":{start:{line:139,column:19},end:{line:139,column:21}},"57":{start:{line:140,column:18},end:{line:140,column:20}},"58":{start:{line:141,column:4},end:{line:141,column:50}},"59":{start:{line:142,column:15},end:{line:142,column:16}},"60":{start:{line:143,column:4},end:{line:150,column:5}},"61":{start:{line:144,column:20},end:{line:144,column:51}},"62":{start:{line:145,column:6},end:{line:147,column:7}},"63":{start:{line:146,column:8},end:{line:146,column:77}},"64":{start:{line:149,column:6},end:{line:149,column:13}},"65":{start:{line:151,column:4},end:{line:151,column:20}},"66":{start:{line:155,column:17},end:{line:155,column:19}},"67":{start:{line:156,column:14},end:{line:156,column:16}},"68":{start:{line:157,column:4},end:{line:157,column:28}},"69":{start:{line:158,column:15},end:{line:158,column:16}},"70":{start:{line:159,column:4},end:{line:163,column:5}},"71":{start:{line:160,column:20},end:{line:160,column:43}},"72":{start:{line:161,column:6},end:{line:161,column:27}},"73":{start:{line:162,column:6},end:{line:162,column:13}},"74":{start:{line:164,column:4},end:{line:164,column:18}},"75":{start:{line:168,column:4},end:{line:168,column:40}},"76":{start:{line:172,column:4},end:{line:172,column:17}},"77":{start:{line:175,column:4},end:{line:175,column:19}},"78":{start:{line:178,column:4},end:{line:178,column:18}},"79":{start:{line:182,column:0},end:{line:182,column:37}},"80":{start:{line:183,column:0},end:{line:183,column:39}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:22},end:{line:37,column:3}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:31},end:{line:70,column:3}},line:39},"2":{name:"(anonymous_2)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:23},end:{line:106,column:3}},line:72},"3":{name:"(anonymous_3)",decl:{start:{line:108,column:2},end:{line:108,column:3}},loc:{start:{line:108,column:25},end:{line:125,column:3}},line:108},"4":{name:"(anonymous_4)",decl:{start:{line:115,column:8},end:{line:115,column:9}},loc:{start:{line:116,column:10},end:{line:116,column:77}},line:116},"5":{name:"(anonymous_5)",decl:{start:{line:118,column:13},end:{line:118,column:14}},loc:{start:{line:118,column:30},end:{line:120,column:7}},line:118},"6":{name:"(anonymous_6)",decl:{start:{line:127,column:2},end:{line:127,column:3}},loc:{start:{line:127,column:22},end:{line:136,column:3}},line:127},"7":{name:"(anonymous_7)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:23},end:{line:152,column:3}},line:138},"8":{name:"(anonymous_8)",decl:{start:{line:154,column:2},end:{line:154,column:3}},loc:{start:{line:154,column:17},end:{line:165,column:3}},line:154},"9":{name:"(anonymous_9)",decl:{start:{line:167,column:2},end:{line:167,column:3}},loc:{start:{line:167,column:19},end:{line:169,column:3}},line:167},"10":{name:"(anonymous_10)",decl:{start:{line:171,column:2},end:{line:171,column:3}},loc:{start:{line:171,column:11},end:{line:173,column:3}},line:171},"11":{name:"(anonymous_11)",decl:{start:{line:174,column:2},end:{line:174,column:3}},loc:{start:{line:174,column:11},end:{line:176,column:3}},line:174},"12":{name:"(anonymous_12)",decl:{start:{line:177,column:2},end:{line:177,column:3}},loc:{start:{line:177,column:11},end:{line:179,column:3}},line:177}},branchMap:{"0":{loc:{start:{line:40,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:69,column:5}},{start:{line:40,column:4},end:{line:69,column:5}}],line:40},"1":{loc:{start:{line:51,column:17},end:{line:51,column:77}},type:"cond-expr",locations:[{start:{line:51,column:43},end:{line:51,column:66}},{start:{line:51,column:69},end:{line:51,column:77}}],line:51},"2":{loc:{start:{line:52,column:19},end:{line:54,column:20}},type:"cond-expr",locations:[{start:{line:53,column:10},end:{line:53,column:35}},{start:{line:54,column:10},end:{line:54,column:20}}],line:52},"3":{loc:{start:{line:55,column:18},end:{line:57,column:19}},type:"cond-expr",locations:[{start:{line:56,column:10},end:{line:56,column:34}},{start:{line:57,column:10},end:{line:57,column:19}}],line:55},"4":{loc:{start:{line:58,column:22},end:{line:60,column:23}},type:"cond-expr",locations:[{start:{line:59,column:10},end:{line:59,column:38}},{start:{line:60,column:10},end:{line:60,column:23}}],line:58},"5":{loc:{start:{line:75,column:4},end:{line:101,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:101,column:5}},{start:{line:75,column:4},end:{line:101,column:5}}],line:75},"6":{loc:{start:{line:76,column:6},end:{line:80,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:80,column:7}},{start:{line:76,column:6},end:{line:80,column:7}}],line:76},"7":{loc:{start:{line:81,column:11},end:{line:101,column:5}},type:"if",locations:[{start:{line:81,column:11},end:{line:101,column:5}},{start:{line:81,column:11},end:{line:101,column:5}}],line:81},"8":{loc:{start:{line:82,column:6},end:{line:90,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:90,column:7}},{start:{line:82,column:6},end:{line:90,column:7}}],line:82},"9":{loc:{start:{line:83,column:8},end:{line:87,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:87,column:9}},{start:{line:83,column:8},end:{line:87,column:9}}],line:83},"10":{loc:{start:{line:91,column:11},end:{line:101,column:5}},type:"if",locations:[{start:{line:91,column:11},end:{line:101,column:5}},{start:{line:91,column:11},end:{line:101,column:5}}],line:91},"11":{loc:{start:{line:92,column:6},end:{line:98,column:7}},type:"if",locations:[{start:{line:92,column:6},end:{line:98,column:7}},{start:{line:92,column:6},end:{line:98,column:7}}],line:92},"12":{loc:{start:{line:145,column:6},end:{line:147,column:7}},type:"if",locations:[{start:{line:145,column:6},end:{line:147,column:7}},{start:{line:145,column:6},end:{line:147,column:7}}],line:145}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"802e1232a3270b072a13609a1154406f080c23c6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1boptpdvjn=function(){return actualCoverage;};}return actualCoverage;}cov_1boptpdvjn();// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
const axios=(cov_1boptpdvjn().s[0]++,require("axios"));const{ComponentDialog,ChoiceFactory,ChoicePrompt,TextPrompt,WaterfallDialog}=(cov_1boptpdvjn().s[1]++,require("botbuilder-dialogs"));const DOC_DIALOG=(cov_1boptpdvjn().s[2]++,"DOC_DIALOG");const WATERFALL_DIALOG=(cov_1boptpdvjn().s[3]++,"WATERFALL_DIALOG");const TEXT_PROMPT=(cov_1boptpdvjn().s[4]++,"TEXT_PROMPT");const CHOICE_PROMPT=(cov_1boptpdvjn().s[5]++,"CHOICE_PROMPT");class DocDialog extends ComponentDialog{constructor(mainId){cov_1boptpdvjn().f[0]++;cov_1boptpdvjn().s[6]++;super(DOC_DIALOG);cov_1boptpdvjn().s[7]++;this.mainId=mainId;cov_1boptpdvjn().s[8]++;this.sum="";cov_1boptpdvjn().s[9]++;this.form="";cov_1boptpdvjn().s[10]++;this.query="";cov_1boptpdvjn().s[11]++;this.filepath="";cov_1boptpdvjn().s[12]++;this.addDialog(new TextPrompt(TEXT_PROMPT));cov_1boptpdvjn().s[13]++;this.addDialog(new ChoicePrompt(CHOICE_PROMPT));cov_1boptpdvjn().s[14]++;this.addDialog(new WaterfallDialog(WATERFALL_DIALOG,[this.beginStep.bind(this),this.dealStep.bind(this),this.answerStep.bind(this)]));cov_1boptpdvjn().s[15]++;this.initialDialogId=WATERFALL_DIALOG;}async beginStep(stepContext){cov_1boptpdvjn().f[1]++;cov_1boptpdvjn().s[16]++;if(stepContext.options.restartMsg){cov_1boptpdvjn().b[0][0]++;cov_1boptpdvjn().s[17]++;return await stepContext.prompt(CHOICE_PROMPT,{prompt:"Anything else for the document?",choices:ChoiceFactory.toChoices(["summarize it","extract table","QnA about it","no"])});}else{cov_1boptpdvjn().b[0][1]++;cov_1boptpdvjn().s[18]++;this.sum=stepContext.options.sum?(cov_1boptpdvjn().b[1][0]++,stepContext.options.sum):(cov_1boptpdvjn().b[1][1]++,this.sum);cov_1boptpdvjn().s[19]++;this.query=stepContext.options.query?(cov_1boptpdvjn().b[2][0]++,stepContext.options.query):(cov_1boptpdvjn().b[2][1]++,this.query);cov_1boptpdvjn().s[20]++;this.form=stepContext.options.form?(cov_1boptpdvjn().b[3][0]++,stepContext.options.form):(cov_1boptpdvjn().b[3][1]++,this.form);cov_1boptpdvjn().s[21]++;this.filepath=stepContext.options.filepath?(cov_1boptpdvjn().b[4][0]++,stepContext.options.filepath):(cov_1boptpdvjn().b[4][1]++,this.filepath);cov_1boptpdvjn().s[22]++;return await stepContext.prompt(CHOICE_PROMPT,{prompt:"How can I help with the document?",choices:ChoiceFactory.toChoices(["summarize it","extract table","QnA about it"])});}}async dealStep(step){cov_1boptpdvjn().f[2]++;cov_1boptpdvjn().s[23]++;console.log(step.result.value);const choice=(cov_1boptpdvjn().s[24]++,step.result.value);cov_1boptpdvjn().s[25]++;if(choice=="summarize it"){cov_1boptpdvjn().b[5][0]++;cov_1boptpdvjn().s[26]++;if(this.sum){cov_1boptpdvjn().b[6][0]++;cov_1boptpdvjn().s[27]++;await step.context.sendActivity(this.sum);}else{cov_1boptpdvjn().b[6][1]++;cov_1boptpdvjn().s[28]++;await step.context.sendActivity("Summarization failed.");}}else{cov_1boptpdvjn().b[5][1]++;cov_1boptpdvjn().s[29]++;if(choice=="extract table"){cov_1boptpdvjn().b[7][0]++;cov_1boptpdvjn().s[30]++;if(this.form){cov_1boptpdvjn().b[8][0]++;cov_1boptpdvjn().s[31]++;if(this.form!="No Table Found"){cov_1boptpdvjn().b[9][0]++;cov_1boptpdvjn().s[32]++;await step.context.sendActivity(this.formatTable(this.form));}else{cov_1boptpdvjn().b[9][1]++;cov_1boptpdvjn().s[33]++;await step.context.sendActivity(this.form);}}else{cov_1boptpdvjn().b[8][1]++;cov_1boptpdvjn().s[34]++;await step.context.sendActivity("Table recognition failed.");}}else{cov_1boptpdvjn().b[7][1]++;cov_1boptpdvjn().s[35]++;if(choice=="QnA about it"){cov_1boptpdvjn().b[10][0]++;cov_1boptpdvjn().s[36]++;if(this.query){cov_1boptpdvjn().b[11][0]++;cov_1boptpdvjn().s[37]++;return await step.prompt(TEXT_PROMPT,{prompt:"What is the question?"});}else{cov_1boptpdvjn().b[11][1]++;cov_1boptpdvjn().s[38]++;await step.context.sendActivity("QA system preprocessing failed.");}}else{cov_1boptpdvjn().b[10][1]++;cov_1boptpdvjn().s[39]++;return await step.endDialog();}}}cov_1boptpdvjn().s[40]++;return await step.replaceDialog(this.initialDialogId,{restartMsg:"What else can I do for you?"});}async answerStep(step){cov_1boptpdvjn().f[3]++;var question=(cov_1boptpdvjn().s[41]++,step.result);cov_1boptpdvjn().s[42]++;await step.context.sendActivity("Searching for the answer...");cov_1boptpdvjn().s[43]++;console.log("question: "+question);let answer=(cov_1boptpdvjn().s[44]++,await axios.get("http://20.77.57.60:5000?query="+question)//http://20.77.57.60:5000?query=Who is the founder of UCL?
.then(v=>{cov_1boptpdvjn().f[4]++;cov_1boptpdvjn().s[45]++;return"answer: "+v.data.answer+" \r\n"+"context: "+v.data.context;}).catch(function(error){cov_1boptpdvjn().f[5]++;cov_1boptpdvjn().s[46]++;console.log(error);}));cov_1boptpdvjn().s[47]++;await step.context.sendActivity(answer);cov_1boptpdvjn().s[48]++;return await step.replaceDialog(this.initialDialogId,{restartMsg:"What else can I do for you?"});}formatTable(tables){cov_1boptpdvjn().f[6]++;var formatted=(cov_1boptpdvjn().s[49]++,"");var nth=(cov_1boptpdvjn().s[50]++,1);cov_1boptpdvjn().s[51]++;while(tables[nth-1]!=undefined){cov_1boptpdvjn().s[52]++;formatted+="Table "+nth+": \r\n";cov_1boptpdvjn().s[53]++;formatted+=this.columDivider(tables[nth-1]);cov_1boptpdvjn().s[54]++;nth++;}cov_1boptpdvjn().s[55]++;return formatted;}columDivider(string){cov_1boptpdvjn().f[7]++;var oneTable=(cov_1boptpdvjn().s[56]++,"");var columns=(cov_1boptpdvjn().s[57]++,[]);cov_1boptpdvjn().s[58]++;columns=this.getRidSides(string).split("}");var item=(cov_1boptpdvjn().s[59]++,1);cov_1boptpdvjn().s[60]++;while(columns[item-1]!=undefined){var element=(cov_1boptpdvjn().s[61]++,columns[item-1].split("{")[1]);cov_1boptpdvjn().s[62]++;if(element!=undefined){cov_1boptpdvjn().b[12][0]++;cov_1boptpdvjn().s[63]++;oneTable+="Column "+item+": "+this.divide(element)+" \r\n";}else{cov_1boptpdvjn().b[12][1]++;}cov_1boptpdvjn().s[64]++;item++;}cov_1boptpdvjn().s[65]++;return oneTable;}divide(string){cov_1boptpdvjn().f[8]++;var column=(cov_1boptpdvjn().s[66]++,[]);var arr=(cov_1boptpdvjn().s[67]++,[]);cov_1boptpdvjn().s[68]++;arr=string.split(",");var item=(cov_1boptpdvjn().s[69]++,0);cov_1boptpdvjn().s[70]++;while(arr[item]!=undefined){var element=(cov_1boptpdvjn().s[71]++,arr[item].split(":")[1]);cov_1boptpdvjn().s[72]++;column.push(element);cov_1boptpdvjn().s[73]++;item++;}cov_1boptpdvjn().s[74]++;return column;}getRidSides(str){cov_1boptpdvjn().f[9]++;cov_1boptpdvjn().s[75]++;return str.slice(1,str.length-1);}set a(n){cov_1boptpdvjn().f[10]++;cov_1boptpdvjn().s[76]++;this.sum=n;}set b(n){cov_1boptpdvjn().f[11]++;cov_1boptpdvjn().s[77]++;this.query=n;}set c(n){cov_1boptpdvjn().f[12]++;cov_1boptpdvjn().s[78]++;this.form=n;}}cov_1boptpdvjn().s[79]++;module.exports.DocDialog=DocDialog;cov_1boptpdvjn().s[80]++;module.exports.DOC_DIALOG=DOC_DIALOG;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY0RpYWxvZy5qcyJdLCJuYW1lcyI6WyJheGlvcyIsInJlcXVpcmUiLCJDb21wb25lbnREaWFsb2ciLCJDaG9pY2VGYWN0b3J5IiwiQ2hvaWNlUHJvbXB0IiwiVGV4dFByb21wdCIsIldhdGVyZmFsbERpYWxvZyIsIkRPQ19ESUFMT0ciLCJXQVRFUkZBTExfRElBTE9HIiwiVEVYVF9QUk9NUFQiLCJDSE9JQ0VfUFJPTVBUIiwiRG9jRGlhbG9nIiwiY29uc3RydWN0b3IiLCJtYWluSWQiLCJzdW0iLCJmb3JtIiwicXVlcnkiLCJmaWxlcGF0aCIsImFkZERpYWxvZyIsImJlZ2luU3RlcCIsImJpbmQiLCJkZWFsU3RlcCIsImFuc3dlclN0ZXAiLCJpbml0aWFsRGlhbG9nSWQiLCJzdGVwQ29udGV4dCIsIm9wdGlvbnMiLCJyZXN0YXJ0TXNnIiwicHJvbXB0IiwiY2hvaWNlcyIsInRvQ2hvaWNlcyIsInN0ZXAiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0IiwidmFsdWUiLCJjaG9pY2UiLCJjb250ZXh0Iiwic2VuZEFjdGl2aXR5IiwiZm9ybWF0VGFibGUiLCJlbmREaWFsb2ciLCJyZXBsYWNlRGlhbG9nIiwicXVlc3Rpb24iLCJhbnN3ZXIiLCJnZXQiLCJ0aGVuIiwidiIsImRhdGEiLCJjYXRjaCIsImVycm9yIiwidGFibGVzIiwiZm9ybWF0dGVkIiwibnRoIiwidW5kZWZpbmVkIiwiY29sdW1EaXZpZGVyIiwic3RyaW5nIiwib25lVGFibGUiLCJjb2x1bW5zIiwiZ2V0UmlkU2lkZXMiLCJzcGxpdCIsIml0ZW0iLCJlbGVtZW50IiwiZGl2aWRlIiwiY29sdW1uIiwiYXJyIiwicHVzaCIsInN0ciIsInNsaWNlIiwibGVuZ3RoIiwiYSIsIm4iLCJiIiwiYyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJteFVBZVk7MkZBZlo7QUFDQTtBQUVBLEtBQU1BLENBQUFBLEtBQUssMEJBQUdDLE9BQU8sQ0FBQyxPQUFELENBQVYsQ0FBWCxDQUNBLEtBQU0s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LEdBQURFLENBQUFBLENBQUMsQ0FBQ0YsQ0FBRCxDQUFJLG1EQUNQLEtBQUt0RCxJQUFMLENBQVlzRCxDQUFaLENBQ0QsQ0FsS3FDLEMseUJBcUt4Q0csTUFBTSxDQUFDQyxPQUFQLENBQWU5RCxTQUFmLENBQTJCQSxTQUEzQixDLHlCQUNBNkQsTUFBTSxDQUFDQyxPQUFQLENBQWVsRSxVQUFmLENBQTRCQSxVQUE1QiIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcblxyXG5jb25zdCBheGlvcyA9IHJlcXVpcmUoXCJheGlvc1wiKTtcclxuY29uc3Qge1xyXG4gIENvbXBvbmVudERpYWxvZyxcclxuICBDaG9pY2VGYWN0b3J5LFxyXG4gIENob2ljZVByb21wdCxcclxuICBUZXh0UHJvbXB0LFxyXG4gIFdhdGVyZmFsbERpYWxvZyxcclxufSA9IHJlcXVpcmUoXCJib3RidWlsZGVyLWRpYWxvZ3NcIik7XHJcbmNvbnN0IERPQ19ESUFMT0cgPSBcIkRPQ19ESUFMT0dcIjtcclxuY29uc3QgV0FURVJGQUxMX0RJQUxPRyA9IFwiV0FURVJGQUxMX0RJQUxPR1wiO1xyXG5jb25zdCBURVhUX1BST01QVCA9IFwiVEVYVF9QUk9NUFRcIjtcclxuY29uc3QgQ0hPSUNFX1BST01QVCA9IFwiQ0hPSUNFX1BST01QVFwiO1xyXG5cclxuY2xhc3MgRG9jRGlhbG9nIGV4dGVuZHMgQ29tcG9uZW50RGlhbG9nIHtcclxuICBjb25zdHJ1Y3RvcihtYWluSWQpIHtcclxuICAgIHN1cGVyKERPQ19ESUFMT0cpO1xyXG4gICAgdGhpcy5tYWluSWQgPSBtYWluSWQ7XHJcbiAgICB0aGlzLnN1bSA9IFwiXCI7XHJcbiAgICB0aGlzLmZvcm0gPSBcIlwiO1xyXG4gICAgdGhpcy5xdWVyeSA9IFwiXCI7XHJcbiAgICB0aGlzLmZpbGVwYXRoID0gXCJcIjtcclxuXHJcbiAgICB0aGlzLmFkZERpYWxvZyhuZXcgVGV4dFByb21wdChURVhUX1BST01QVCkpO1xyXG4gICAgdGhpcy5hZGREaWFsb2cobmV3IENob2ljZVByb21wdChDSE9JQ0VfUFJPTVBUKSk7XHJcbiAgICB0aGlzLmFkZERpYWxvZyhcclxuICAgICAgbmV3IFdhdGVyZmFsbERpYWxvZyhXQVRFUkZBTExfRElBTE9HLCBbXHJcbiAgICAgICAgdGhpcy5iZWdpblN0ZXAuYmluZCh0aGlzKSxcclxuICAgICAgICB0aGlzLmRlYWxTdGVwLmJpbmQodGhpcyksXHJcbiAgICAgICAgdGhpcy5hbnN3ZXJTdGVwLmJpbmQodGhpcyksXHJcbiAgICAgIF0pXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuaW5pdGlhbERpYWxvZ0lkID0gV0FURVJGQUxMX0RJQUxPRztcclxuICB9XHJcblxyXG4gIGFzeW5jIGJlZ2luU3RlcChzdGVwQ29udGV4dCkge1xyXG4gICAgaWYgKHN0ZXBDb250ZXh0Lm9wdGlvbnMucmVzdGFydE1zZykge1xyXG4gICAgICByZXR1cm4gYXdhaXQgc3RlcENvbnRleHQucHJvbXB0KENIT0lDRV9QUk9NUFQsIHtcclxuICAgICAgICBwcm9tcHQ6IFwiQW55dGhpbmcgZWxzZSBmb3IgdGhlIGRvY3VtZW50P1wiLFxyXG4gICAgICAgIGNob2ljZXM6IENob2ljZUZhY3RvcnkudG9DaG9pY2VzKFtcclxuICAgICAgICAgIFwic3VtbWFyaXplIGl0XCIsXHJcbiAgICAgICAgICBcImV4dHJhY3QgdGFibGVcIixcclxuICAgICAgICAgIFwiUW5BIGFib3V0IGl0XCIsXHJcbiAgICAgICAgICBcIm5vXCIsXHJcbiAgICAgICAgXSksXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zdW0gPSBzdGVwQ29udGV4dC5vcHRpb25zLnN1bSA/IHN0ZXBDb250ZXh0Lm9wdGlvbnMuc3VtIDogdGhpcy5zdW07XHJcbiAgICAgIHRoaXMucXVlcnkgPSBzdGVwQ29udGV4dC5vcHRpb25zLnF1ZXJ5XHJcbiAgICAgICAgPyBzdGVwQ29udGV4dC5vcHRpb25zLnF1ZXJ5XHJcbiAgICAgICAgOiB0aGlzLnF1ZXJ5O1xyXG4gICAgICB0aGlzLmZvcm0gPSBzdGVwQ29udGV4dC5vcHRpb25zLmZvcm1cclxuICAgICAgICA/IHN0ZXBDb250ZXh0Lm9wdGlvbnMuZm9ybVxyXG4gICAgICAgIDogdGhpcy5mb3JtO1xyXG4gICAgICB0aGlzLmZpbGVwYXRoID0gc3RlcENvbnRleHQub3B0aW9ucy5maWxlcGF0aFxyXG4gICAgICAgID8gc3RlcENvbnRleHQub3B0aW9ucy5maWxlcGF0aFxyXG4gICAgICAgIDogdGhpcy5maWxlcGF0aDtcclxuICAgICAgcmV0dXJuIGF3YWl0IHN0ZXBDb250ZXh0LnByb21wdChDSE9JQ0VfUFJPTVBULCB7XHJcbiAgICAgICAgcHJvbXB0OiBcIkhvdyBjYW4gSSBoZWxwIHdpdGggdGhlIGRvY3VtZW50P1wiLFxyXG4gICAgICAgIGNob2ljZXM6IENob2ljZUZhY3RvcnkudG9DaG9pY2VzKFtcclxuICAgICAgICAgIFwic3VtbWFyaXplIGl0XCIsXHJcbiAgICAgICAgICBcImV4dHJhY3QgdGFibGVcIixcclxuICAgICAgICAgIFwiUW5BIGFib3V0IGl0XCIsXHJcbiAgICAgICAgXSksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVhbFN0ZXAoc3RlcCkge1xyXG4gICAgY29uc29sZS5sb2coc3RlcC5yZXN1bHQudmFsdWUpO1xyXG4gICAgY29uc3QgY2hvaWNlID0gc3RlcC5yZXN1bHQudmFsdWU7XHJcbiAgICBpZiAoY2hvaWNlID09IFwic3VtbWFyaXplIGl0XCIpIHtcclxuICAgICAgaWYgKHRoaXMuc3VtKSB7XHJcbiAgICAgICAgYXdhaXQgc3RlcC5jb250ZXh0LnNlbmRBY3Rpdml0eSh0aGlzLnN1bSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgc3RlcC5jb250ZXh0LnNlbmRBY3Rpdml0eShcIlN1bW1hcml6YXRpb24gZmFpbGVkLlwiKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gXCJleHRyYWN0IHRhYmxlXCIpIHtcclxuICAgICAgaWYgKHRoaXMuZm9ybSkge1xyXG4gICAgICAgIGlmICh0aGlzLmZvcm0gIT0gXCJObyBUYWJsZSBGb3VuZFwiKSB7XHJcbiAgICAgICAgICBhd2FpdCBzdGVwLmNvbnRleHQuc2VuZEFjdGl2aXR5KHRoaXMuZm9ybWF0VGFibGUodGhpcy5mb3JtKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGF3YWl0IHN0ZXAuY29udGV4dC5zZW5kQWN0aXZpdHkodGhpcy5mb3JtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgc3RlcC5jb250ZXh0LnNlbmRBY3Rpdml0eShcIlRhYmxlIHJlY29nbml0aW9uIGZhaWxlZC5cIik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoY2hvaWNlID09IFwiUW5BIGFib3V0IGl0XCIpIHtcclxuICAgICAgaWYgKHRoaXMucXVlcnkpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgc3RlcC5wcm9tcHQoVEVYVF9QUk9NUFQsIHtcclxuICAgICAgICAgIHByb21wdDogXCJXaGF0IGlzIHRoZSBxdWVzdGlvbj9cIixcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhd2FpdCBzdGVwLmNvbnRleHQuc2VuZEFjdGl2aXR5KFwiUUEgc3lzdGVtIHByZXByb2Nlc3NpbmcgZmFpbGVkLlwiKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHN0ZXAuZW5kRGlhbG9nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHN0ZXAucmVwbGFjZURpYWxvZyh0aGlzLmluaXRpYWxEaWFsb2dJZCwge1xyXG4gICAgICByZXN0YXJ0TXNnOiBcIldoYXQgZWxzZSBjYW4gSSBkbyBmb3IgeW91P1wiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBhbnN3ZXJTdGVwKHN0ZXApIHtcclxuICAgIHZhciBxdWVzdGlvbiA9IHN0ZXAucmVzdWx0O1xyXG4gICAgYXdhaXQgc3RlcC5jb250ZXh0LnNlbmRBY3Rpdml0eShcIlNlYXJjaGluZyBmb3IgdGhlIGFuc3dlci4uLlwiKTtcclxuICAgIGNvbnNvbGUubG9nKFwicXVlc3Rpb246IFwiICsgcXVlc3Rpb24pO1xyXG4gICAgbGV0IGFuc3dlciA9IGF3YWl0IGF4aW9zXHJcbiAgICAgIC5nZXQoXCJodHRwOi8vMjAuNzcuNTcuNjA6NTAwMD9xdWVyeT1cIiArIHF1ZXN0aW9uKSAvL2h0dHA6Ly8yMC43Ny41Ny42MDo1MDAwP3F1ZXJ5PVdobyBpcyB0aGUgZm91bmRlciBvZiBVQ0w/XHJcbiAgICAgIC50aGVuKFxyXG4gICAgICAgICh2KSA9PlxyXG4gICAgICAgICAgXCJhbnN3ZXI6IFwiICsgdi5kYXRhLmFuc3dlciArIFwiIFxcclxcblwiICsgXCJjb250ZXh0OiBcIiArIHYuZGF0YS5jb250ZXh0XHJcbiAgICAgIClcclxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICBhd2FpdCBzdGVwLmNvbnRleHQuc2VuZEFjdGl2aXR5KGFuc3dlcik7XHJcbiAgICByZXR1cm4gYXdhaXQgc3RlcC5yZXBsYWNlRGlhbG9nKHRoaXMuaW5pdGlhbERpYWxvZ0lkLCB7XHJcbiAgICAgIHJlc3RhcnRNc2c6IFwiV2hhdCBlbHNlIGNhbiBJIGRvIGZvciB5b3U/XCIsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZvcm1hdFRhYmxlKHRhYmxlcykge1xyXG4gICAgdmFyIGZvcm1hdHRlZCA9IFwiXCI7XHJcbiAgICB2YXIgbnRoID0gMTtcclxuICAgIHdoaWxlICh0YWJsZXNbbnRoIC0gMV0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGZvcm1hdHRlZCArPSBcIlRhYmxlIFwiICsgbnRoICsgXCI6IFxcclxcblwiO1xyXG4gICAgICBmb3JtYXR0ZWQgKz0gdGhpcy5jb2x1bURpdmlkZXIodGFibGVzW250aCAtIDFdKTtcclxuICAgICAgbnRoKys7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybWF0dGVkO1xyXG4gIH1cclxuXHJcbiAgY29sdW1EaXZpZGVyKHN0cmluZykge1xyXG4gICAgdmFyIG9uZVRhYmxlID0gXCJcIjtcclxuICAgIHZhciBjb2x1bW5zID0gW107XHJcbiAgICBjb2x1bW5zID0gdGhpcy5nZXRSaWRTaWRlcyhzdHJpbmcpLnNwbGl0KFwifVwiKTtcclxuICAgIHZhciBpdGVtID0gMTtcclxuICAgIHdoaWxlIChjb2x1bW5zW2l0ZW0gLSAxXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgdmFyIGVsZW1lbnQgPSBjb2x1bW5zW2l0ZW0gLSAxXS5zcGxpdChcIntcIilbMV07XHJcbiAgICAgIGlmIChlbGVtZW50ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIG9uZVRhYmxlICs9IFwiQ29sdW1uIFwiICsgaXRlbSArIFwiOiBcIiArIHRoaXMuZGl2aWRlKGVsZW1lbnQpICsgXCIgXFxyXFxuXCI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGl0ZW0rKztcclxuICAgIH1cclxuICAgIHJldHVybiBvbmVUYWJsZTtcclxuICB9XHJcblxyXG4gIGRpdmlkZShzdHJpbmcpIHtcclxuICAgIHZhciBjb2x1bW4gPSBbXTtcclxuICAgIHZhciBhcnIgPSBbXTtcclxuICAgIGFyciA9IHN0cmluZy5zcGxpdChcIixcIik7XHJcbiAgICB2YXIgaXRlbSA9IDA7XHJcbiAgICB3aGlsZSAoYXJyW2l0ZW1dICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICB2YXIgZWxlbWVudCA9IGFycltpdGVtXS5zcGxpdChcIjpcIilbMV07XHJcbiAgICAgIGNvbHVtbi5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICBpdGVtKys7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29sdW1uO1xyXG4gIH1cclxuXHJcbiAgZ2V0UmlkU2lkZXMoc3RyKSB7XHJcbiAgICByZXR1cm4gc3RyLnNsaWNlKDEsIHN0ci5sZW5ndGggLSAxKTtcclxuICB9XHJcblxyXG4gIHNldCBhKG4pIHtcclxuICAgIHRoaXMuc3VtID0gbjtcclxuICB9XHJcbiAgc2V0IGIobikge1xyXG4gICAgdGhpcy5xdWVyeSA9IG47XHJcbiAgfVxyXG4gIHNldCBjKG4pIHtcclxuICAgIHRoaXMuZm9ybSA9IG47XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5Eb2NEaWFsb2cgPSBEb2NEaWFsb2c7XHJcbm1vZHVsZS5leHBvcnRzLkRPQ19ESUFMT0cgPSBET0NfRElBTE9HO1xyXG4iXX0=