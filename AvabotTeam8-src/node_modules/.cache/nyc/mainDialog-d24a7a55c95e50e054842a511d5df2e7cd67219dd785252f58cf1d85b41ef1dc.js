function cov_13uzh0bhr2(){var path="/Users/doudou/COMP0016_2020_21_Team8/AvabotTeam8-src/dialogs/mainDialog.js";var hash="fd9936fd5fc26fee731682eae2e810dcf391def7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/doudou/COMP0016_2020_21_Team8/AvabotTeam8-src/dialogs/mainDialog.js",statementMap:{"0":{start:{line:4,column:13},end:{line:4,column:28}},"1":{start:{line:5,column:14},end:{line:5,column:30}},"2":{start:{line:6,column:11},end:{line:6,column:24}},"3":{start:{line:7,column:12},end:{line:7,column:31}},"4":{start:{line:8,column:15},end:{line:8,column:35}},"5":{start:{line:17,column:4},end:{line:17,column:33}},"6":{start:{line:18,column:40},end:{line:18,column:65}},"7":{start:{line:19,column:34},end:{line:19,column:56}},"8":{start:{line:21,column:26},end:{line:21,column:45}},"9":{start:{line:22,column:22},end:{line:22,column:37}},"10":{start:{line:23,column:25},end:{line:23,column:43}},"11":{start:{line:27,column:8},end:{line:27,column:28}},"12":{start:{line:29,column:8},end:{line:29,column:43}},"13":{start:{line:30,column:8},end:{line:30,column:60}},"14":{start:{line:31,column:8},end:{line:31,column:56}},"15":{start:{line:32,column:8},end:{line:32,column:86}},"16":{start:{line:34,column:8},end:{line:39,column:12}},"17":{start:{line:41,column:8},end:{line:41,column:48}},"18":{start:{line:51,column:26},end:{line:51,column:49}},"19":{start:{line:52,column:8},end:{line:52,column:28}},"20":{start:{line:54,column:30},end:{line:54,column:72}},"21":{start:{line:55,column:24},end:{line:55,column:60}},"22":{start:{line:56,column:8},end:{line:58,column:9}},"23":{start:{line:57,column:12},end:{line:57,column:53}},"24":{start:{line:64,column:20},end:{line:64,column:96}},"25":{start:{line:65,column:8},end:{line:68,column:11}},"26":{start:{line:72,column:23},end:{line:72,column:40}},"27":{start:{line:73,column:8},end:{line:91,column:9}},"28":{start:{line:74,column:12},end:{line:74,column:57}},"29":{start:{line:76,column:13},end:{line:91,column:9}},"30":{start:{line:77,column:32},end:{line:80,column:13}},"31":{start:{line:82,column:12},end:{line:82,column:71}},"32":{start:{line:85,column:32},end:{line:88,column:13}},"33":{start:{line:90,column:12},end:{line:90,column:71}},"34":{start:{line:96,column:8},end:{line:144,column:9}},"35":{start:{line:97,column:23},end:{line:97,column:49}},"36":{start:{line:98,column:23},end:{line:98,column:72}},"37":{start:{line:99,column:12},end:{line:99,column:30}},"38":{start:{line:100,column:12},end:{line:143,column:13}},"39":{start:{line:101,column:16},end:{line:142,column:17}},"40":{start:{line:102,column:20},end:{line:102,column:92}},"41":{start:{line:103,column:38},end:{line:103,column:62}},"42":{start:{line:104,column:20},end:{line:108,column:21}},"43":{start:{line:105,column:22},end:{line:105,column:42}},"44":{start:{line:109,column:20},end:{line:109,column:148}},"45":{start:{line:112,column:39},end:{line:112,column:41}},"46":{start:{line:113,column:20},end:{line:113,column:89}},"47":{start:{line:114,column:31},end:{line:114,column:45}},"48":{start:{line:115,column:20},end:{line:115,column:68}},"49":{start:{line:116,column:20},end:{line:130,column:27}},"50":{start:{line:123,column:36},end:{line:123,column:49}},"51":{start:{line:124,column:28},end:{line:126,column:31}},"52":{start:{line:125,column:32},end:{line:125,column:60}},"53":{start:{line:129,column:28},end:{line:129,column:47}},"54":{start:{line:131,column:20},end:{line:135,column:21}},"55":{start:{line:132,column:22},end:{line:132,column:42}},"56":{start:{line:136,column:20},end:{line:141,column:21}},"57":{start:{line:137,column:24},end:{line:137,column:70}},"58":{start:{line:140,column:24},end:{line:140,column:84}},"59":{start:{line:145,column:8},end:{line:145,column:32}},"60":{start:{line:150,column:8},end:{line:150,column:109}},"61":{start:{line:154,column:20},end:{line:154,column:34}},"62":{start:{line:155,column:8},end:{line:155,column:57}},"63":{start:{line:156,column:20},end:{line:156,column:34}},"64":{start:{line:157,column:8},end:{line:157,column:57}},"65":{start:{line:158,column:20},end:{line:158,column:34}},"66":{start:{line:159,column:8},end:{line:159,column:57}},"67":{start:{line:161,column:21},end:{line:176,column:11}},"68":{start:{line:177,column:21},end:{line:177,column:23}},"69":{start:{line:178,column:8},end:{line:190,column:10}},"70":{start:{line:179,column:12},end:{line:188,column:14}},"71":{start:{line:180,column:16},end:{line:180,column:43}},"72":{start:{line:181,column:16},end:{line:186,column:17}},"73":{start:{line:182,column:20},end:{line:182,column:51}},"74":{start:{line:183,column:20},end:{line:183,column:63}},"75":{start:{line:185,column:20},end:{line:185,column:35}},"76":{start:{line:191,column:8},end:{line:191,column:33}},"77":{start:{line:192,column:8},end:{line:192,column:28}},"78":{start:{line:193,column:8},end:{line:193,column:22}},"79":{start:{line:198,column:25},end:{line:198,column:100}},"80":{start:{line:199,column:32},end:{line:199,column:59}},"81":{start:{line:204,column:12},end:{line:214,column:13}},"82":{start:{line:207,column:16},end:{line:208,column:42}},"83":{start:{line:209,column:16},end:{line:209,column:52}},"84":{start:{line:212,column:16},end:{line:212,column:85}},"85":{start:{line:213,column:16},end:{line:213,column:33}},"86":{start:{line:219,column:30},end:{line:219,column:96}},"87":{start:{line:220,column:16},end:{line:220,column:74}},"88":{start:{line:220,column:64},end:{line:220,column:73}},"89":{start:{line:221,column:8},end:{line:221,column:16}},"90":{start:{line:226,column:19},end:{line:226,column:34}},"91":{start:{line:228,column:20},end:{line:228,column:41}},"92":{start:{line:231,column:30},end:{line:231,column:56}},"93":{start:{line:233,column:8},end:{line:244,column:9}},"94":{start:{line:235,column:29},end:{line:235,column:82}},"95":{start:{line:236,column:12},end:{line:240,column:15}},"96":{start:{line:237,column:16},end:{line:239,column:17}},"97":{start:{line:238,column:20},end:{line:238,column:34}},"98":{start:{line:242,column:12},end:{line:242,column:33}},"99":{start:{line:243,column:12},end:{line:243,column:29}},"100":{start:{line:247,column:8},end:{line:250,column:10}},"101":{start:{line:256,column:8},end:{line:279,column:9}},"102":{start:{line:257,column:26},end:{line:257,column:54}},"103":{start:{line:258,column:30},end:{line:258,column:60}},"104":{start:{line:259,column:27},end:{line:259,column:29}},"105":{start:{line:261,column:12},end:{line:268,column:15}},"106":{start:{line:262,column:16},end:{line:267,column:17}},"107":{start:{line:263,column:20},end:{line:263,column:46}},"108":{start:{line:265,column:21},end:{line:267,column:17}},"109":{start:{line:266,column:20},end:{line:266,column:46}},"110":{start:{line:270,column:12},end:{line:270,column:54}},"111":{start:{line:273,column:12},end:{line:273,column:37}},"112":{start:{line:275,column:12},end:{line:275,column:81}},"113":{start:{line:278,column:12},end:{line:278,column:24}},"114":{start:{line:284,column:0},end:{line:284,column:39}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:26,column:4},end:{line:26,column:5}},loc:{start:{line:26,column:18},end:{line:42,column:5}},line:26},"1":{name:"(anonymous_1)",decl:{start:{line:50,column:4},end:{line:50,column:5}},loc:{start:{line:50,column:37},end:{line:59,column:5}},line:50},"2":{name:"(anonymous_2)",decl:{start:{line:61,column:4},end:{line:61,column:5}},loc:{start:{line:61,column:26},end:{line:69,column:5}},line:61},"3":{name:"(anonymous_3)",decl:{start:{line:71,column:4},end:{line:71,column:5}},loc:{start:{line:71,column:27},end:{line:93,column:5}},line:71},"4":{name:"(anonymous_4)",decl:{start:{line:95,column:4},end:{line:95,column:5}},loc:{start:{line:95,column:24},end:{line:146,column:5}},line:95},"5":{name:"(anonymous_5)",decl:{start:{line:122,column:30},end:{line:122,column:31}},loc:{start:{line:122,column:50},end:{line:127,column:25}},line:122},"6":{name:"(anonymous_6)",decl:{start:{line:124,column:38},end:{line:124,column:39}},loc:{start:{line:124,column:46},end:{line:126,column:29}},line:124},"7":{name:"(anonymous_7)",decl:{start:{line:128,column:31},end:{line:128,column:32}},loc:{start:{line:128,column:48},end:{line:130,column:25}},line:128},"8":{name:"(anonymous_8)",decl:{start:{line:149,column:4},end:{line:149,column:5}},loc:{start:{line:149,column:27},end:{line:151,column:5}},line:149},"9":{name:"(anonymous_9)",decl:{start:{line:153,column:4},end:{line:153,column:5}},loc:{start:{line:153,column:24},end:{line:194,column:5}},line:153},"10":{name:"(anonymous_10)",decl:{start:{line:178,column:46},end:{line:178,column:47}},loc:{start:{line:178,column:57},end:{line:190,column:9}},line:178},"11":{name:"(anonymous_11)",decl:{start:{line:179,column:28},end:{line:179,column:29}},loc:{start:{line:179,column:38},end:{line:188,column:13}},line:179},"12":{name:"(anonymous_12)",decl:{start:{line:196,column:4},end:{line:196,column:5}},loc:{start:{line:196,column:48},end:{line:223,column:5}},line:196},"13":{name:"replyForReceivedAttachments",decl:{start:{line:203,column:23},end:{line:203,column:50}},loc:{start:{line:203,column:72},end:{line:215,column:9}},line:203},"14":{name:"(anonymous_14)",decl:{start:{line:220,column:54},end:{line:220,column:55}},loc:{start:{line:220,column:64},end:{line:220,column:73}},line:220},"15":{name:"(anonymous_15)",decl:{start:{line:225,column:4},end:{line:225,column:5}},loc:{start:{line:225,column:49},end:{line:251,column:5}},line:225},"16":{name:"(anonymous_16)",decl:{start:{line:236,column:55},end:{line:236,column:56}},loc:{start:{line:236,column:68},end:{line:240,column:13}},line:236},"17":{name:"(anonymous_17)",decl:{start:{line:255,column:4},end:{line:255,column:5}},loc:{start:{line:255,column:41},end:{line:280,column:5}},line:255},"18":{name:"(anonymous_18)",decl:{start:{line:261,column:32},end:{line:261,column:33}},loc:{start:{line:261,column:46},end:{line:268,column:13}},line:261}},branchMap:{"0":{loc:{start:{line:56,column:8},end:{line:58,column:9}},type:"if",locations:[{start:{line:56,column:8},end:{line:58,column:9}},{start:{line:56,column:8},end:{line:58,column:9}}],line:56},"1":{loc:{start:{line:64,column:20},end:{line:64,column:96}},type:"cond-expr",locations:[{start:{line:64,column:46},end:{line:64,column:69}},{start:{line:64,column:72},end:{line:64,column:96}}],line:64},"2":{loc:{start:{line:73,column:8},end:{line:91,column:9}},type:"if",locations:[{start:{line:73,column:8},end:{line:91,column:9}},{start:{line:73,column:8},end:{line:91,column:9}}],line:73},"3":{loc:{start:{line:76,column:13},end:{line:91,column:9}},type:"if",locations:[{start:{line:76,column:13},end:{line:91,column:9}},{start:{line:76,column:13},end:{line:91,column:9}}],line:76},"4":{loc:{start:{line:96,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:96,column:8},end:{line:144,column:9}},{start:{line:96,column:8},end:{line:144,column:9}}],line:96},"5":{loc:{start:{line:96,column:12},end:{line:96,column:52}},type:"binary-expr",locations:[{start:{line:96,column:12},end:{line:96,column:23}},{start:{line:96,column:27},end:{line:96,column:52}}],line:96},"6":{loc:{start:{line:100,column:12},end:{line:143,column:13}},type:"if",locations:[{start:{line:100,column:12},end:{line:143,column:13}},{start:{line:100,column:12},end:{line:143,column:13}}],line:100},"7":{loc:{start:{line:101,column:16},end:{line:142,column:17}},type:"if",locations:[{start:{line:101,column:16},end:{line:142,column:17}},{start:{line:101,column:16},end:{line:142,column:17}}],line:101},"8":{loc:{start:{line:136,column:20},end:{line:141,column:21}},type:"if",locations:[{start:{line:136,column:20},end:{line:141,column:21}},{start:{line:136,column:20},end:{line:141,column:21}}],line:136},"9":{loc:{start:{line:181,column:16},end:{line:186,column:17}},type:"if",locations:[{start:{line:181,column:16},end:{line:186,column:17}},{start:{line:181,column:16},end:{line:186,column:17}}],line:181},"10":{loc:{start:{line:204,column:12},end:{line:214,column:13}},type:"if",locations:[{start:{line:204,column:12},end:{line:214,column:13}},{start:{line:204,column:12},end:{line:214,column:13}}],line:204},"11":{loc:{start:{line:237,column:16},end:{line:239,column:17}},type:"if",locations:[{start:{line:237,column:16},end:{line:239,column:17}},{start:{line:237,column:16},end:{line:239,column:17}}],line:237},"12":{loc:{start:{line:256,column:8},end:{line:279,column:9}},type:"if",locations:[{start:{line:256,column:8},end:{line:279,column:9}},{start:{line:256,column:8},end:{line:279,column:9}}],line:256},"13":{loc:{start:{line:262,column:16},end:{line:267,column:17}},type:"if",locations:[{start:{line:262,column:16},end:{line:267,column:17}},{start:{line:262,column:16},end:{line:267,column:17}}],line:262},"14":{loc:{start:{line:262,column:20},end:{line:262,column:114}},type:"binary-expr",locations:[{start:{line:262,column:20},end:{line:262,column:66}},{start:{line:262,column:70},end:{line:262,column:114}}],line:262},"15":{loc:{start:{line:265,column:21},end:{line:267,column:17}},type:"if",locations:[{start:{line:265,column:21},end:{line:267,column:17}},{start:{line:265,column:21},end:{line:267,column:17}}],line:265},"16":{loc:{start:{line:265,column:25},end:{line:265,column:149}},type:"binary-expr",locations:[{start:{line:265,column:25},end:{line:265,column:62}},{start:{line:265,column:67},end:{line:265,column:106}},{start:{line:265,column:110},end:{line:265,column:148}}],line:265}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fd9936fd5fc26fee731682eae2e810dcf391def7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_13uzh0bhr2=function(){return actualCoverage;};}return actualCoverage;}cov_13uzh0bhr2();// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
const path=(cov_13uzh0bhr2().s[0]++,require('path'));const axios=(cov_13uzh0bhr2().s[1]++,require('axios'));const fs=(cov_13uzh0bhr2().s[2]++,require('fs'));const fse=(cov_13uzh0bhr2().s[3]++,require("fs-extra"));var FormData=(cov_13uzh0bhr2().s[4]++,require("form-data"));const{AttachmentPrompt,ChoiceFactory,ChoicePrompt,ComponentDialog,DialogSet,DialogTurnStatus,WaterfallDialog}=(cov_13uzh0bhr2().s[5]++,require('botbuilder-dialogs'));const{AnswerDialog,ANSWER_DIALOG}=(cov_13uzh0bhr2().s[6]++,require('./answerDialog'));const{DocDialog,DOC_DIALOG}=(cov_13uzh0bhr2().s[7]++,require('./docDialog'));const ATTACHMENT_PROMPT=(cov_13uzh0bhr2().s[8]++,'ATTACHMENT_PROMPT');const CHOICE_PROMPT=(cov_13uzh0bhr2().s[9]++,'CHOICE_PROMPT');const WATERFALL_DIALOG=(cov_13uzh0bhr2().s[10]++,'WATERFALL_DIALOG');class MainDialog extends ComponentDialog{constructor(){cov_13uzh0bhr2().f[0]++;cov_13uzh0bhr2().s[11]++;super('mainDialog');cov_13uzh0bhr2().s[12]++;this.addDialog(new AnswerDialog());cov_13uzh0bhr2().s[13]++;this.addDialog(new DocDialog(this.initialDialogId));cov_13uzh0bhr2().s[14]++;this.addDialog(new ChoicePrompt(CHOICE_PROMPT));cov_13uzh0bhr2().s[15]++;this.addDialog(new AttachmentPrompt(ATTACHMENT_PROMPT,this.promptValidator));cov_13uzh0bhr2().s[16]++;this.addDialog(new WaterfallDialog(WATERFALL_DIALOG,[this.startStep.bind(this),this.chooseStep.bind(this),this.docStep.bind(this),this.repeatStep.bind(this)]));cov_13uzh0bhr2().s[17]++;this.initialDialogId=WATERFALL_DIALOG;}/**
     * The run method handles the incoming activity (in the form of a TurnContext) and passes it through the dialog system.
     * If no dialog is active, it will start the default dialog.
     * @param {*} turnContext
     * @param {*} accessor
     */async run(turnContext,accessor){cov_13uzh0bhr2().f[1]++;const dialogSet=(cov_13uzh0bhr2().s[18]++,new DialogSet(accessor));cov_13uzh0bhr2().s[19]++;dialogSet.add(this);const dialogContext=(cov_13uzh0bhr2().s[20]++,await dialogSet.createContext(turnContext));const results=(cov_13uzh0bhr2().s[21]++,await dialogContext.continueDialog());cov_13uzh0bhr2().s[22]++;if(results.status===DialogTurnStatus.empty){cov_13uzh0bhr2().b[0][0]++;cov_13uzh0bhr2().s[23]++;await dialogContext.beginDialog(this.id);}else{cov_13uzh0bhr2().b[0][1]++;}}async startStep(step){cov_13uzh0bhr2().f[2]++;// WaterfallStep always finishes with the end of the Waterfall or with another dialog; here it is a Prompt Dialog.
// Running a prompt here means the next WaterfallStep will be run when the user's response is received.
const msg=(cov_13uzh0bhr2().s[24]++,step.options.restartMsg?(cov_13uzh0bhr2().b[1][0]++,step.options.restartMsg):(cov_13uzh0bhr2().b[1][1]++,'What can I do for you?'));cov_13uzh0bhr2().s[25]++;return await step.prompt(CHOICE_PROMPT,{prompt:msg,choices:ChoiceFactory.toChoices(['ask a question','process a document',,'recognize an image'])});}async chooseStep(step){cov_13uzh0bhr2().f[3]++;const choice=(cov_13uzh0bhr2().s[26]++,step.result.value);cov_13uzh0bhr2().s[27]++;if(choice=='ask a question'){cov_13uzh0bhr2().b[2][0]++;cov_13uzh0bhr2().s[28]++;return await step.beginDialog(ANSWER_DIALOG);}else{cov_13uzh0bhr2().b[2][1]++;cov_13uzh0bhr2().s[29]++;if(choice=='process a document'){cov_13uzh0bhr2().b[3][0]++;var promptOptions=(cov_13uzh0bhr2().s[30]++,{prompt:'Please attach a document in pdf.',retryPrompt:'That was not a document that I can help, please try again.'});cov_13uzh0bhr2().s[31]++;return await step.prompt(ATTACHMENT_PROMPT,promptOptions);}else{cov_13uzh0bhr2().b[3][1]++;var promptOptions=(cov_13uzh0bhr2().s[32]++,{prompt:'Please attach an image.',retryPrompt:'That was not an image that I can help, please try again.'});cov_13uzh0bhr2().s[33]++;return await step.prompt(ATTACHMENT_PROMPT,promptOptions);}}}async docStep(step){cov_13uzh0bhr2().f[4]++;cov_13uzh0bhr2().s[34]++;if((cov_13uzh0bhr2().b[5][0]++,step.result)&&(cov_13uzh0bhr2().b[5][1]++,step.result[0].contentUrl)){cov_13uzh0bhr2().b[4][0]++;var type=(cov_13uzh0bhr2().s[35]++,step.result[0].contentType);var path=(cov_13uzh0bhr2().s[36]++,await this.handleIncomingAttachment(step.context));cov_13uzh0bhr2().s[37]++;console.log(path);cov_13uzh0bhr2().s[38]++;if(path){cov_13uzh0bhr2().b[6][0]++;cov_13uzh0bhr2().s[39]++;if(type==='application/pdf'){cov_13uzh0bhr2().b[7][0]++;cov_13uzh0bhr2().s[40]++;await step.context.sendActivity('Processing the document, please wait');var req_results=(cov_13uzh0bhr2().s[41]++,await this.sendReq(path));cov_13uzh0bhr2().s[42]++;try{cov_13uzh0bhr2().s[43]++;fs.unlinkSync(path);}catch(error){}cov_13uzh0bhr2().s[44]++;return await step.beginDialog(DOC_DIALOG,{sum:req_results[0],query:req_results[1],form:req_results[2],filepath:path});}else{cov_13uzh0bhr2().b[7][1]++;var image_result=(cov_13uzh0bhr2().s[45]++,'');cov_13uzh0bhr2().s[46]++;await step.context.sendActivity('Processing the image, please wait');var form=(cov_13uzh0bhr2().s[47]++,new FormData());cov_13uzh0bhr2().s[48]++;form.append("file",fse.createReadStream(path));cov_13uzh0bhr2().s[49]++;await axios({method:"post",url:'http://avabotformrecog.azurewebsites.net/api/FormRecogFunction?type=BusinessCard',data:form,headers:form.getHeaders()}).then(function(response){cov_13uzh0bhr2().f[5]++;var a=(cov_13uzh0bhr2().s[50]++,response.data);cov_13uzh0bhr2().s[51]++;a.forEach(line=>{cov_13uzh0bhr2().f[6]++;cov_13uzh0bhr2().s[52]++;image_result+=line+'\n';});}).catch(function(error){cov_13uzh0bhr2().f[7]++;cov_13uzh0bhr2().s[53]++;console.log(error);});cov_13uzh0bhr2().s[54]++;try{cov_13uzh0bhr2().s[55]++;fs.unlinkSync(path);}catch(error){}cov_13uzh0bhr2().s[56]++;if(image_result){cov_13uzh0bhr2().b[8][0]++;cov_13uzh0bhr2().s[57]++;await step.context.sendActivity(image_result);}else{cov_13uzh0bhr2().b[8][1]++;cov_13uzh0bhr2().s[58]++;await step.context.sendActivity('Image recognition failed');}}}else{cov_13uzh0bhr2().b[6][1]++;}}else{cov_13uzh0bhr2().b[4][1]++;}cov_13uzh0bhr2().s[59]++;return await step.next();}async repeatStep(step){cov_13uzh0bhr2().f[8]++;cov_13uzh0bhr2().s[60]++;return await step.replaceDialog(this.initialDialogId,{restartMsg:'What else can I do for you?'});}async sendReq(path){cov_13uzh0bhr2().f[9]++;var form1=(cov_13uzh0bhr2().s[61]++,new FormData());cov_13uzh0bhr2().s[62]++;form1.append("file",fse.createReadStream(path));var form2=(cov_13uzh0bhr2().s[63]++,new FormData());cov_13uzh0bhr2().s[64]++;form2.append("file",fse.createReadStream(path));var form3=(cov_13uzh0bhr2().s[65]++,new FormData());cov_13uzh0bhr2().s[66]++;form3.append("file",fse.createReadStream(path));let reqArr=(cov_13uzh0bhr2().s[67]++,[axios({method:"post",url:"https://textsumapi.azurewebsites.net/api/TextSummary",data:form1,headers:form1.getHeaders()}),axios({method:"post",url:"http://20.77.57.60:5000",data:form2,headers:form2.getHeaders()}),axios({method:"post",url:"https://avabotformrecog.azurewebsites.net/api/FormRecogFunction?type=Layout",data:form3,headers:form3.getHeaders()})]);var output=(cov_13uzh0bhr2().s[68]++,[]);cov_13uzh0bhr2().s[69]++;await Promise.allSettled(reqArr).then(results=>{cov_13uzh0bhr2().f[10]++;cov_13uzh0bhr2().s[70]++;results.forEach(result=>{cov_13uzh0bhr2().f[11]++;cov_13uzh0bhr2().s[71]++;console.log(result.status);cov_13uzh0bhr2().s[72]++;if(result.status=='fulfilled'){cov_13uzh0bhr2().b[9][0]++;cov_13uzh0bhr2().s[73]++;output.push(result.value.data);cov_13uzh0bhr2().s[74]++;console.log('first: '+result.value.data);}else{cov_13uzh0bhr2().b[9][1]++;cov_13uzh0bhr2().s[75]++;output.push(0);}});});cov_13uzh0bhr2().s[76]++;console.log("finished！");cov_13uzh0bhr2().s[77]++;console.log(output);cov_13uzh0bhr2().s[78]++;return output;}async handleIncomingAttachment(turnContext){cov_13uzh0bhr2().f[12]++;// Prepare Promises to download each attachment and then execute each Promise.
const promises=(cov_13uzh0bhr2().s[79]++,await turnContext.activity.attachments.map(this.downloadAttachmentAndWrite));const successfulSaves=(cov_13uzh0bhr2().s[80]++,await Promise.all(promises));// Replies back to the user with information about where the attachment is stored on the bot's server,
// and what the name of the saved file is.
async function replyForReceivedAttachments(localAttachmentData){cov_13uzh0bhr2().f[13]++;cov_13uzh0bhr2().s[81]++;if(localAttachmentData){cov_13uzh0bhr2().b[10][0]++;cov_13uzh0bhr2().s[82]++;// Because the TurnContext was bound to this function, the bot can call
// `TurnContext.sendActivity` via `this.sendActivity`;
await this.sendActivity(`Attachment "${localAttachmentData.fileName}" `+`has been received.`);cov_13uzh0bhr2().s[83]++;return localAttachmentData.localPath;}else{cov_13uzh0bhr2().b[10][1]++;cov_13uzh0bhr2().s[84]++;await this.sendActivity('Attachment was not successfully received.');cov_13uzh0bhr2().s[85]++;return undefined;}}// Prepare Promises to reply to the user with information about saved attachments.
// The current TurnContext is bound so `replyForReceivedAttachments` can also send replies.
const replyPromises=(cov_13uzh0bhr2().s[86]++,successfulSaves.map(replyForReceivedAttachments.bind(turnContext)));let r=(cov_13uzh0bhr2().s[87]++,await Promise.all(replyPromises).then(result=>{cov_13uzh0bhr2().f[14]++;cov_13uzh0bhr2().s[88]++;return result[0];}));cov_13uzh0bhr2().s[89]++;return r;}async downloadAttachmentAndWrite(attachment){cov_13uzh0bhr2().f[15]++;var name=(cov_13uzh0bhr2().s[90]++,attachment.name);// Retrieve the attachment via the attachment's contentUrl.
const url=(cov_13uzh0bhr2().s[91]++,attachment.contentUrl);// Local file path for the bot to save the attachment.
const localFileName=(cov_13uzh0bhr2().s[92]++,path.join(__dirname,name));cov_13uzh0bhr2().s[93]++;try{// arraybuffer is necessary for images
const response=(cov_13uzh0bhr2().s[94]++,await axios.get(url,{responseType:'arraybuffer'}));cov_13uzh0bhr2().s[95]++;fs.writeFile(localFileName,response.data,fsError=>{cov_13uzh0bhr2().f[16]++;cov_13uzh0bhr2().s[96]++;if(fsError){cov_13uzh0bhr2().b[11][0]++;cov_13uzh0bhr2().s[97]++;throw fsError;}else{cov_13uzh0bhr2().b[11][1]++;}});}catch(error){cov_13uzh0bhr2().s[98]++;console.error(error);cov_13uzh0bhr2().s[99]++;return undefined;}// If no error was thrown while writing to disk, return the attachment's name
// and localFilePath for the response back to the user.
cov_13uzh0bhr2().s[100]++;return{fileName:name,localPath:localFileName};}async promptValidator(promptContext){cov_13uzh0bhr2().f[17]++;cov_13uzh0bhr2().s[101]++;if(promptContext.recognized.succeeded){cov_13uzh0bhr2().b[12][0]++;var docType=(cov_13uzh0bhr2().s[102]++,promptContext.options.prompt);var attachments=(cov_13uzh0bhr2().s[103]++,promptContext.recognized.value);var validDoc=(cov_13uzh0bhr2().s[104]++,[]);cov_13uzh0bhr2().s[105]++;attachments.forEach(attachment=>{cov_13uzh0bhr2().f[18]++;cov_13uzh0bhr2().s[106]++;if((cov_13uzh0bhr2().b[14][0]++,docType==='Please attach a document in pdf.')&&(cov_13uzh0bhr2().b[14][1]++,attachment.contentType==='application/pdf')){cov_13uzh0bhr2().b[13][0]++;cov_13uzh0bhr2().s[107]++;//|| attachment.contentType === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'|| attachment.contentType === 'application/msword'
validDoc.push(attachment);}else{cov_13uzh0bhr2().b[13][1]++;cov_13uzh0bhr2().s[108]++;if((cov_13uzh0bhr2().b[16][0]++,docType==='Please attach an image.')&&((cov_13uzh0bhr2().b[16][1]++,attachment.contentType==='image/jpeg')||(cov_13uzh0bhr2().b[16][2]++,attachment.contentType==='image/png'))){cov_13uzh0bhr2().b[15][0]++;cov_13uzh0bhr2().s[109]++;validDoc.push(attachment);}else{cov_13uzh0bhr2().b[15][1]++;}}});cov_13uzh0bhr2().s[110]++;promptContext.recognized.value=validDoc;// If none of the attachments are valid images, the retry prompt should be sent.
cov_13uzh0bhr2().s[111]++;return!!validDoc.length;}else{cov_13uzh0bhr2().b[12][1]++;cov_13uzh0bhr2().s[112]++;await promptContext.context.sendActivity('No attachments received.');// We can return true from a validator function even if Recognized.Succeeded is false.
cov_13uzh0bhr2().s[113]++;return true;}}}cov_13uzh0bhr2().s[114]++;module.exports.MainDialog=MainDialog;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW5EaWFsb2cuanMiXSwibmFtZXMiOlsicGF0aCIsInJlcXVpcmUiLCJheGlvcyIsImZzIiwiZnNlIiwiRm9ybURhdGEiLCJBdHRhY2htZW50UHJvbXB0IiwiQ2hvaWNlRmFjdG9yeSIsIkNob2ljZVByb21wdCIsIkNvbXBvbmVudERpYWxvZyIsIkRpYWxvZ1NldCIsIkRpYWxvZ1R1cm5TdGF0dXMiLCJXYXRlcmZhbGxEaWFsb2ciLCJBbnN3ZXJEaWFsb2ciLCJBTlNXRVJfRElBTE9HIiwiRG9jRGlhbG9nIiwiRE9DX0RJQUxPRyIsIkFUVEFDSE1FTlRfUFJPTVBUIiwiQ0hPSUNFX1BST01QVCIsIldBVEVSRkFMTF9ESUFMT0ciLCJNYWluRGlhbG9nIiwiY29uc3RydWN0b3IiLCJhZGREaWFsb2ciLCJpbml0aWFsRGlhbG9nSWQiLCJwcm9tcHRWYWxpZGF0b3IiLCJzdGFydFN0ZXAiLCJiaW5kIiwiY2hvb3NlU3RlcCIsImRvY1N0ZXAiLCJyZXBlYXRTdGVwIiwicnVuIiwidHVybkNvbnRleHQiLCJhY2Nlc3NvciIsImRpYWxvZ1NldCIsImFkZCIsImRpYWxvZ0NvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwicmVzdWx0cyIsImNvbnRpbnVlRGlhbG9nIiwic3RhdHVzIiwiZW1wdHkiLCJiZWdpbkRpYWxvZyIsImlkIiwic3RlcCIsIm1zZyIsIm9wdGlvbnMiLCJyZXN0YXJ0TXNnIiwicHJvbXB0IiwiY2hvaWNlcyIsInRvQ2hvaWNlcyIsImNob2ljZSIsInJlc3VsdCIsInZhbHVlIiwicHJvbXB0T3B0aW9ucyIsInJldHJ5UHJvbXB0IiwiY29udGVudFVybCIsInR5cGUiLCJjb250ZW50VHlwZSIsImhhbmRsZUluY29taW5nQXR0YWNobWVudCIsImNvbnRleHQiLCJjb25zb2xlIiwibG9nIiwic2VuZEFjdGl2aXR5IiwicmVxX3Jlc3VsdHMiLCJzZW5kUmVxIiwidW5saW5rU3luYyIsImVycm9yIiwic3VtIiwicXVlcnkiLCJmb3JtIiwiZmlsZXBhdGgiLCJpbWFnZV9yZXN1bHQiLCJhcHBlbmQiLCJjcmVhdGVSZWFkU3RyZWFtIiwibWV0aG9kIiwidXJsIiwiZGF0YSIsImhlYWRlcnMiLCJnZXRIZWFkZXJzIiwidGhlbiIsInJlc3BvbnNlIiwiYSIsImZvckVhY2giLCJsaW5lIiwiY2F0Y2giLCJuZXh0IiwicmVwbGFjZURpYWxvZyIsImZvcm0xIiwiZm9ybTIiLCJmb3JtMyIsInJlcUFyciIsIm91dHB1dCIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwicHVzaCIsInByb21pc2VzIiwiYWN0aXZpdHkiLCJhdHRhY2htZW50cyIsIm1hcCIsImRvd25sb2FkQXR0YWNobWVudEFuZFdyaXRlIiwic3VjY2Vzc2Z1bFNhdmVzIiwiYWxsIiwicmVwbHlGb3JSZWNlaXZlZEF0dGFjaG1lbnRzIiwibG9jYWxBdHRhY2htZW50RGF0YSIsImZpbGVOYW1lIiwibG9jYWxQYXRoIiwidW5kZWZpbmVkIiwicmVwbHlQcm9taXNlcyIsInIiLCJhdHRhY2htZW50IiwibmFtZSIsImxvY2FsRmlsZU5hbWUiLCJqb2luIiwiX19kaXJuYW1lIiwiZ2V0IiwicmVzcG9uc2VUeXBlIiwid3JpdGVGaWxlIiwiZnNFcnJvciIsInByb21wdENvbnRleHQiLCJyZWNvZ25pemVkIiwic3VjY2VlZGVkIiwiZG9jVHlwZSIsInZhbGlkRG9jIiwibGVuZ3RoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ink4Y0FlWTsyRkFmWjtBQUNBO0FBRUEsS0FBTUEsQ0FBQUEsSUFBSSwwQkFBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUMsQ0FBQUEsS0FBSywwQkFBR0QsT0FBTyxDQUFDLE9BQUQsQ0FBVixDQUFYLENBQ0EsS0FBTUUsQ0FBQUEsRUFBRSwwQkFBR0YsT0FBTyxDQUFDLElBQUQsQ0FBVixDQUFSLENBQ0EsS0FBTUcsQ0FBQUEsR0FBRywwQkFBR0gsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFULENBQ0EsR0FBSUksQ0FBQUEsUUFBUSwwQkFBR0osT0FB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RCxVQUFVLENBQUNwRCxXQUFYLEdBQTJCLFdBQXRFLENBQTFDLENBQUosQ0FBa0ksdURBQ25JaUUsUUFBUSxDQUFDNUIsSUFBVCxDQUFjZSxVQUFkLEVBQ0gsQ0FGSSxrQ0FFSixDQUNKLENBUEQsRUFMb0MsMEJBY3BDUyxhQUFhLENBQUNDLFVBQWQsQ0FBeUJuRSxLQUF6QixDQUFpQ3NFLFFBQWpDLENBRUE7QUFoQm9DLDBCQWlCcEMsTUFBTyxDQUFDLENBQUNBLFFBQVEsQ0FBQ0MsTUFBbEIsQ0FDSCxDQWxCRCxJQWtCTyx1REFDSCxLQUFNTCxDQUFBQSxhQUFhLENBQUMzRCxPQUFkLENBQXNCRyxZQUF0QixDQUFtQywwQkFBbkMsQ0FBTixDQUVBO0FBSEcsMEJBSUgsTUFBTyxLQUFQLENBQ0gsQ0FDSixDQS9Qb0MsQywwQkFtUXpDOEQsTUFBTSxDQUFDQyxPQUFQLENBQWV6RyxVQUFmLENBQTRCQSxVQUE1QiIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcblxyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuY29uc3QgZnNlID0gcmVxdWlyZShcImZzLWV4dHJhXCIpO1xyXG52YXIgRm9ybURhdGEgPSByZXF1aXJlKFwiZm9ybS1kYXRhXCIpO1xyXG5jb25zdCB7XHJcbiAgICBBdHRhY2htZW50UHJvbXB0LFxyXG4gICAgQ2hvaWNlRmFjdG9yeSxcclxuICAgIENob2ljZVByb21wdCxcclxuICAgIENvbXBvbmVudERpYWxvZyxcclxuICAgIERpYWxvZ1NldCxcclxuICAgIERpYWxvZ1R1cm5TdGF0dXMsXHJcbiAgICBXYXRlcmZhbGxEaWFsb2dcclxufSA9IHJlcXVpcmUoJ2JvdGJ1aWxkZXItZGlhbG9ncycpO1xyXG5jb25zdCB7IEFuc3dlckRpYWxvZywgQU5TV0VSX0RJQUxPRyB9ID0gcmVxdWlyZSgnLi9hbnN3ZXJEaWFsb2cnKTtcclxuY29uc3QgeyBEb2NEaWFsb2csIERPQ19ESUFMT0cgfSA9IHJlcXVpcmUoJy4vZG9jRGlhbG9nJyk7XHJcblxyXG5jb25zdCBBVFRBQ0hNRU5UX1BST01QVCA9ICdBVFRBQ0hNRU5UX1BST01QVCc7XHJcbmNvbnN0IENIT0lDRV9QUk9NUFQgPSAnQ0hPSUNFX1BST01QVCc7XHJcbmNvbnN0IFdBVEVSRkFMTF9ESUFMT0cgPSAnV0FURVJGQUxMX0RJQUxPRyc7XHJcblxyXG5jbGFzcyBNYWluRGlhbG9nIGV4dGVuZHMgQ29tcG9uZW50RGlhbG9nIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdtYWluRGlhbG9nJyk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkRGlhbG9nKG5ldyBBbnN3ZXJEaWFsb2coKSk7XHJcbiAgICAgICAgdGhpcy5hZGREaWFsb2cobmV3IERvY0RpYWxvZyh0aGlzLmluaXRpYWxEaWFsb2dJZCkpO1xyXG4gICAgICAgIHRoaXMuYWRkRGlhbG9nKG5ldyBDaG9pY2VQcm9tcHQoQ0hPSUNFX1BST01QVCkpO1xyXG4gICAgICAgIHRoaXMuYWRkRGlhbG9nKG5ldyBBdHRhY2htZW50UHJvbXB0KEFUVEFDSE1FTlRfUFJPTVBULCB0aGlzLnByb21wdFZhbGlkYXRvcikpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZERpYWxvZyhuZXcgV2F0ZXJmYWxsRGlhbG9nKFdBVEVSRkFMTF9ESUFMT0csIFtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFN0ZXAuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgdGhpcy5jaG9vc2VTdGVwLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIHRoaXMuZG9jU3RlcC5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICB0aGlzLnJlcGVhdFN0ZXAuYmluZCh0aGlzKVxyXG4gICAgICAgIF0pKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsRGlhbG9nSWQgPSBXQVRFUkZBTExfRElBTE9HO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJ1biBtZXRob2QgaGFuZGxlcyB0aGUgaW5jb21pbmcgYWN0aXZpdHkgKGluIHRoZSBmb3JtIG9mIGEgVHVybkNvbnRleHQpIGFuZCBwYXNzZXMgaXQgdGhyb3VnaCB0aGUgZGlhbG9nIHN5c3RlbS5cclxuICAgICAqIElmIG5vIGRpYWxvZyBpcyBhY3RpdmUsIGl0IHdpbGwgc3RhcnQgdGhlIGRlZmF1bHQgZGlhbG9nLlxyXG4gICAgICogQHBhcmFtIHsqfSB0dXJuQ29udGV4dFxyXG4gICAgICogQHBhcmFtIHsqfSBhY2Nlc3NvclxyXG4gICAgICovXHJcbiAgICBhc3luYyBydW4odHVybkNvbnRleHQsIGFjY2Vzc29yKSB7XHJcbiAgICAgICAgY29uc3QgZGlhbG9nU2V0ID0gbmV3IERpYWxvZ1NldChhY2Nlc3Nvcik7XHJcbiAgICAgICAgZGlhbG9nU2V0LmFkZCh0aGlzKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGlhbG9nQ29udGV4dCA9IGF3YWl0IGRpYWxvZ1NldC5jcmVhdGVDb250ZXh0KHR1cm5Db250ZXh0KTtcclxuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZGlhbG9nQ29udGV4dC5jb250aW51ZURpYWxvZygpO1xyXG4gICAgICAgIGlmIChyZXN1bHRzLnN0YXR1cyA9PT0gRGlhbG9nVHVyblN0YXR1cy5lbXB0eSkge1xyXG4gICAgICAgICAgICBhd2FpdCBkaWFsb2dDb250ZXh0LmJlZ2luRGlhbG9nKHRoaXMuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzdGFydFN0ZXAoc3RlcCkge1xyXG4gICAgICAgIC8vIFdhdGVyZmFsbFN0ZXAgYWx3YXlzIGZpbmlzaGVzIHdpdGggdGhlIGVuZCBvZiB0aGUgV2F0ZXJmYWxsIG9yIHdpdGggYW5vdGhlciBkaWFsb2c7IGhlcmUgaXQgaXMgYSBQcm9tcHQgRGlhbG9nLlxyXG4gICAgICAgIC8vIFJ1bm5pbmcgYSBwcm9tcHQgaGVyZSBtZWFucyB0aGUgbmV4dCBXYXRlcmZhbGxTdGVwIHdpbGwgYmUgcnVuIHdoZW4gdGhlIHVzZXIncyByZXNwb25zZSBpcyByZWNlaXZlZC5cclxuICAgICAgICBjb25zdCBtc2cgPSBzdGVwLm9wdGlvbnMucmVzdGFydE1zZyA/IHN0ZXAub3B0aW9ucy5yZXN0YXJ0TXNnIDogJ1doYXQgY2FuIEkgZG8gZm9yIHlvdT8nO1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBzdGVwLnByb21wdChDSE9JQ0VfUFJPTVBULCB7XHJcbiAgICAgICAgICAgIHByb21wdDogbXNnLFxyXG4gICAgICAgICAgICBjaG9pY2VzOiBDaG9pY2VGYWN0b3J5LnRvQ2hvaWNlcyhbJ2FzayBhIHF1ZXN0aW9uJywgJ3Byb2Nlc3MgYSBkb2N1bWVudCcsICwgJ3JlY29nbml6ZSBhbiBpbWFnZSddKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNob29zZVN0ZXAoc3RlcCkge1xyXG4gICAgICAgIGNvbnN0IGNob2ljZSA9IHN0ZXAucmVzdWx0LnZhbHVlO1xyXG4gICAgICAgIGlmIChjaG9pY2UgPT0gJ2FzayBhIHF1ZXN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc3RlcC5iZWdpbkRpYWxvZyhBTlNXRVJfRElBTE9HKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2hvaWNlID09ICdwcm9jZXNzIGEgZG9jdW1lbnQnKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9tcHRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgcHJvbXB0OiAnUGxlYXNlIGF0dGFjaCBhIGRvY3VtZW50IGluIHBkZi4nLFxyXG4gICAgICAgICAgICAgICAgcmV0cnlQcm9tcHQ6ICdUaGF0IHdhcyBub3QgYSBkb2N1bWVudCB0aGF0IEkgY2FuIGhlbHAsIHBsZWFzZSB0cnkgYWdhaW4uJ1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN0ZXAucHJvbXB0KEFUVEFDSE1FTlRfUFJPTVBULCBwcm9tcHRPcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9tcHRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgcHJvbXB0OiAnUGxlYXNlIGF0dGFjaCBhbiBpbWFnZS4nLFxyXG4gICAgICAgICAgICAgICAgcmV0cnlQcm9tcHQ6ICdUaGF0IHdhcyBub3QgYW4gaW1hZ2UgdGhhdCBJIGNhbiBoZWxwLCBwbGVhc2UgdHJ5IGFnYWluLidcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdGVwLnByb21wdChBVFRBQ0hNRU5UX1BST01QVCwgcHJvbXB0T3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkb2NTdGVwKHN0ZXApIHtcclxuICAgICAgICBpZiAoc3RlcC5yZXN1bHQgJiYgc3RlcC5yZXN1bHRbMF0uY29udGVudFVybCkge1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IHN0ZXAucmVzdWx0WzBdLmNvbnRlbnRUeXBlO1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGF3YWl0IHRoaXMuaGFuZGxlSW5jb21pbmdBdHRhY2htZW50KHN0ZXAuY29udGV4dCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhdGgpO1xyXG4gICAgICAgICAgICBpZiAocGF0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdhcHBsaWNhdGlvbi9wZGYnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RlcC5jb250ZXh0LnNlbmRBY3Rpdml0eSgnUHJvY2Vzc2luZyB0aGUgZG9jdW1lbnQsIHBsZWFzZSB3YWl0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcV9yZXN1bHRzID0gYXdhaXQgdGhpcy5zZW5kUmVxKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmcy51bmxpbmtTeW5jKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN0ZXAuYmVnaW5EaWFsb2coRE9DX0RJQUxPRywgeyBzdW06IHJlcV9yZXN1bHRzWzBdLCBxdWVyeTogcmVxX3Jlc3VsdHNbMV0sIGZvcm06IHJlcV9yZXN1bHRzWzJdLCBmaWxlcGF0aDogcGF0aCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZV9yZXN1bHQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdGVwLmNvbnRleHQuc2VuZEFjdGl2aXR5KCdQcm9jZXNzaW5nIHRoZSBpbWFnZSwgcGxlYXNlIHdhaXQnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKFwiZmlsZVwiLCBmc2UuY3JlYXRlUmVhZFN0cmVhbShwYXRoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwicG9zdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vYXZhYm90Zm9ybXJlY29nLmF6dXJld2Vic2l0ZXMubmV0L2FwaS9Gb3JtUmVjb2dGdW5jdGlvbj90eXBlPUJ1c2luZXNzQ2FyZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZvcm0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGZvcm0uZ2V0SGVhZGVycygpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmZvckVhY2gobGluZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfcmVzdWx0ICs9IGxpbmUgKyAnXFxuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmcy51bmxpbmtTeW5jKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlX3Jlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdGVwLmNvbnRleHQuc2VuZEFjdGl2aXR5KGltYWdlX3Jlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdGVwLmNvbnRleHQuc2VuZEFjdGl2aXR5KCdJbWFnZSByZWNvZ25pdGlvbiBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHN0ZXAubmV4dCgpXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFzeW5jIHJlcGVhdFN0ZXAoc3RlcCkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBzdGVwLnJlcGxhY2VEaWFsb2codGhpcy5pbml0aWFsRGlhbG9nSWQsIHsgcmVzdGFydE1zZzogJ1doYXQgZWxzZSBjYW4gSSBkbyBmb3IgeW91PycgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2VuZFJlcShwYXRoKSB7XHJcbiAgICAgICAgdmFyIGZvcm0xID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybTEuYXBwZW5kKFwiZmlsZVwiLCBmc2UuY3JlYXRlUmVhZFN0cmVhbShwYXRoKSk7XHJcbiAgICAgICAgdmFyIGZvcm0yID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybTIuYXBwZW5kKFwiZmlsZVwiLCBmc2UuY3JlYXRlUmVhZFN0cmVhbShwYXRoKSk7XHJcbiAgICAgICAgdmFyIGZvcm0zID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybTMuYXBwZW5kKFwiZmlsZVwiLCBmc2UuY3JlYXRlUmVhZFN0cmVhbShwYXRoKSk7XHJcblxyXG4gICAgICAgIGxldCByZXFBcnIgPSBbYXhpb3Moe1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwicG9zdFwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly90ZXh0c3VtYXBpLmF6dXJld2Vic2l0ZXMubmV0L2FwaS9UZXh0U3VtbWFyeVwiLFxyXG4gICAgICAgICAgICBkYXRhOiBmb3JtMSxcclxuICAgICAgICAgICAgaGVhZGVyczogZm9ybTEuZ2V0SGVhZGVycygpXHJcbiAgICAgICAgfSksIGF4aW9zKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcInBvc3RcIixcclxuICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly8yMC43Ny41Ny42MDo1MDAwXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IGZvcm0yLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBmb3JtMi5nZXRIZWFkZXJzKClcclxuICAgICAgICB9KSwgYXhpb3Moe1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwicG9zdFwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hdmFib3Rmb3JtcmVjb2cuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL0Zvcm1SZWNvZ0Z1bmN0aW9uP3R5cGU9TGF5b3V0XCIsXHJcbiAgICAgICAgICAgIGRhdGE6IGZvcm0zLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBmb3JtMy5nZXRIZWFkZXJzKClcclxuICAgICAgICB9KV07XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChyZXFBcnIpLnRoZW4ocmVzdWx0cyA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PSAnZnVsZmlsbGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHJlc3VsdC52YWx1ZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmlyc3Q6ICcgKyByZXN1bHQudmFsdWUuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zb2xlLmxvZyhcImZpbmlzaGVk77yBXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG91dHB1dCk7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBoYW5kbGVJbmNvbWluZ0F0dGFjaG1lbnQodHVybkNvbnRleHQpIHtcclxuICAgICAgICAvLyBQcmVwYXJlIFByb21pc2VzIHRvIGRvd25sb2FkIGVhY2ggYXR0YWNobWVudCBhbmQgdGhlbiBleGVjdXRlIGVhY2ggUHJvbWlzZS5cclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IGF3YWl0IHR1cm5Db250ZXh0LmFjdGl2aXR5LmF0dGFjaG1lbnRzLm1hcCh0aGlzLmRvd25sb2FkQXR0YWNobWVudEFuZFdyaXRlKTtcclxuICAgICAgICBjb25zdCBzdWNjZXNzZnVsU2F2ZXMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XHJcblxyXG4gICAgICAgIC8vIFJlcGxpZXMgYmFjayB0byB0aGUgdXNlciB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHdoZXJlIHRoZSBhdHRhY2htZW50IGlzIHN0b3JlZCBvbiB0aGUgYm90J3Mgc2VydmVyLFxyXG4gICAgICAgIC8vIGFuZCB3aGF0IHRoZSBuYW1lIG9mIHRoZSBzYXZlZCBmaWxlIGlzLlxyXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJlcGx5Rm9yUmVjZWl2ZWRBdHRhY2htZW50cyhsb2NhbEF0dGFjaG1lbnREYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2NhbEF0dGFjaG1lbnREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIHRoZSBUdXJuQ29udGV4dCB3YXMgYm91bmQgdG8gdGhpcyBmdW5jdGlvbiwgdGhlIGJvdCBjYW4gY2FsbFxyXG4gICAgICAgICAgICAgICAgLy8gYFR1cm5Db250ZXh0LnNlbmRBY3Rpdml0eWAgdmlhIGB0aGlzLnNlbmRBY3Rpdml0eWA7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRBY3Rpdml0eShgQXR0YWNobWVudCBcIiR7bG9jYWxBdHRhY2htZW50RGF0YS5maWxlTmFtZX1cIiBgICtcclxuICAgICAgICAgICAgICAgICAgICBgaGFzIGJlZW4gcmVjZWl2ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxBdHRhY2htZW50RGF0YS5sb2NhbFBhdGhcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRBY3Rpdml0eSgnQXR0YWNobWVudCB3YXMgbm90IHN1Y2Nlc3NmdWxseSByZWNlaXZlZC4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFByZXBhcmUgUHJvbWlzZXMgdG8gcmVwbHkgdG8gdGhlIHVzZXIgd2l0aCBpbmZvcm1hdGlvbiBhYm91dCBzYXZlZCBhdHRhY2htZW50cy5cclxuICAgICAgICAvLyBUaGUgY3VycmVudCBUdXJuQ29udGV4dCBpcyBib3VuZCBzbyBgcmVwbHlGb3JSZWNlaXZlZEF0dGFjaG1lbnRzYCBjYW4gYWxzbyBzZW5kIHJlcGxpZXMuXHJcbiAgICAgICAgY29uc3QgcmVwbHlQcm9taXNlcyA9IHN1Y2Nlc3NmdWxTYXZlcy5tYXAocmVwbHlGb3JSZWNlaXZlZEF0dGFjaG1lbnRzLmJpbmQodHVybkNvbnRleHQpKTtcclxuICAgICAgICBsZXQgciA9IGF3YWl0IFByb21pc2UuYWxsKHJlcGx5UHJvbWlzZXMpLnRoZW4ocmVzdWx0ID0+IHJlc3VsdFswXSk7XHJcbiAgICAgICAgcmV0dXJuIHJcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZG93bmxvYWRBdHRhY2htZW50QW5kV3JpdGUoYXR0YWNobWVudCkge1xyXG4gICAgICAgIHZhciBuYW1lID0gYXR0YWNobWVudC5uYW1lO1xyXG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSBhdHRhY2htZW50IHZpYSB0aGUgYXR0YWNobWVudCdzIGNvbnRlbnRVcmwuXHJcbiAgICAgICAgY29uc3QgdXJsID0gYXR0YWNobWVudC5jb250ZW50VXJsO1xyXG5cclxuICAgICAgICAvLyBMb2NhbCBmaWxlIHBhdGggZm9yIHRoZSBib3QgdG8gc2F2ZSB0aGUgYXR0YWNobWVudC5cclxuICAgICAgICBjb25zdCBsb2NhbEZpbGVOYW1lID0gcGF0aC5qb2luKF9fZGlybmFtZSwgbmFtZSk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGFycmF5YnVmZmVyIGlzIG5lY2Vzc2FyeSBmb3IgaW1hZ2VzXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHVybCwgeyByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicgfSk7XHJcbiAgICAgICAgICAgIGZzLndyaXRlRmlsZShsb2NhbEZpbGVOYW1lLCByZXNwb25zZS5kYXRhLCAoZnNFcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZzRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmc0Vycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgbm8gZXJyb3Igd2FzIHRocm93biB3aGlsZSB3cml0aW5nIHRvIGRpc2ssIHJldHVybiB0aGUgYXR0YWNobWVudCdzIG5hbWVcclxuICAgICAgICAvLyBhbmQgbG9jYWxGaWxlUGF0aCBmb3IgdGhlIHJlc3BvbnNlIGJhY2sgdG8gdGhlIHVzZXIuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmlsZU5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIGxvY2FsUGF0aDogbG9jYWxGaWxlTmFtZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBhc3luYyBwcm9tcHRWYWxpZGF0b3IocHJvbXB0Q29udGV4dCkge1xyXG4gICAgICAgIGlmIChwcm9tcHRDb250ZXh0LnJlY29nbml6ZWQuc3VjY2VlZGVkKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2NUeXBlID0gcHJvbXB0Q29udGV4dC5vcHRpb25zLnByb21wdDtcclxuICAgICAgICAgICAgdmFyIGF0dGFjaG1lbnRzID0gcHJvbXB0Q29udGV4dC5yZWNvZ25pemVkLnZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgdmFsaWREb2MgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGF0dGFjaG1lbnRzLmZvckVhY2goYXR0YWNobWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jVHlwZSA9PT0gJ1BsZWFzZSBhdHRhY2ggYSBkb2N1bWVudCBpbiBwZGYuJyAmJiBhdHRhY2htZW50LmNvbnRlbnRUeXBlID09PSAnYXBwbGljYXRpb24vcGRmJykgeyAvL3x8IGF0dGFjaG1lbnQuY29udGVudFR5cGUgPT09ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCd8fCBhdHRhY2htZW50LmNvbnRlbnRUeXBlID09PSAnYXBwbGljYXRpb24vbXN3b3JkJ1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkRG9jLnB1c2goYXR0YWNobWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkb2NUeXBlID09PSAnUGxlYXNlIGF0dGFjaCBhbiBpbWFnZS4nICYmIChhdHRhY2htZW50LmNvbnRlbnRUeXBlID09PSAnaW1hZ2UvanBlZycgfHwgYXR0YWNobWVudC5jb250ZW50VHlwZSA9PT0gJ2ltYWdlL3BuZycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWREb2MucHVzaChhdHRhY2htZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBwcm9tcHRDb250ZXh0LnJlY29nbml6ZWQudmFsdWUgPSB2YWxpZERvYztcclxuXHJcbiAgICAgICAgICAgIC8vIElmIG5vbmUgb2YgdGhlIGF0dGFjaG1lbnRzIGFyZSB2YWxpZCBpbWFnZXMsIHRoZSByZXRyeSBwcm9tcHQgc2hvdWxkIGJlIHNlbnQuXHJcbiAgICAgICAgICAgIHJldHVybiAhIXZhbGlkRG9jLmxlbmd0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCBwcm9tcHRDb250ZXh0LmNvbnRleHQuc2VuZEFjdGl2aXR5KCdObyBhdHRhY2htZW50cyByZWNlaXZlZC4nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIGNhbiByZXR1cm4gdHJ1ZSBmcm9tIGEgdmFsaWRhdG9yIGZ1bmN0aW9uIGV2ZW4gaWYgUmVjb2duaXplZC5TdWNjZWVkZWQgaXMgZmFsc2UuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLk1haW5EaWFsb2cgPSBNYWluRGlhbG9nOyJdfQ==