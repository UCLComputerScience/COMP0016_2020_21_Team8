function cov_1qarz5kalb(){var path="/Users/doudou/COMP0016_2020_21_Team8/AvabotTeam8-src/dialogs/answerDialog.js";var hash="3648767bf0be1afbcbcd8e12fed49c2eb1b72399";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/doudou/COMP0016_2020_21_Team8/AvabotTeam8-src/dialogs/answerDialog.js",statementMap:{"0":{start:{line:4,column:57},end:{line:4,column:86}},"1":{start:{line:5,column:21},end:{line:5,column:45}},"2":{start:{line:6,column:27},end:{line:6,column:48}},"3":{start:{line:7,column:24},end:{line:7,column:54}},"4":{start:{line:9,column:22},end:{line:9,column:37}},"5":{start:{line:10,column:25},end:{line:10,column:43}},"6":{start:{line:11,column:20},end:{line:11,column:33}},"7":{start:{line:15,column:8},end:{line:15,column:29}},"8":{start:{line:16,column:8},end:{line:24,column:9}},"9":{start:{line:17,column:12},end:{line:21,column:15}},"10":{start:{line:23,column:12},end:{line:23,column:97}},"11":{start:{line:26,column:8},end:{line:26,column:52}},"12":{start:{line:27,column:8},end:{line:30,column:12}},"13":{start:{line:32,column:8},end:{line:32,column:48}},"14":{start:{line:36,column:20},end:{line:36,column:188}},"15":{start:{line:37,column:28},end:{line:43,column:9}},"16":{start:{line:44,column:24},end:{line:46,column:9}},"17":{start:{line:49,column:8},end:{line:49,column:62}},"18":{start:{line:53,column:8},end:{line:55,column:9}},"19":{start:{line:54,column:12},end:{line:54,column:49}},"20":{start:{line:56,column:8},end:{line:56,column:41}},"21":{start:{line:57,column:8},end:{line:73,column:9}},"22":{start:{line:58,column:31},end:{line:58,column:82}},"23":{start:{line:59,column:22},end:{line:59,column:24}},"24":{start:{line:61,column:12},end:{line:67,column:13}},"25":{start:{line:62,column:16},end:{line:62,column:43}},"26":{start:{line:66,column:16},end:{line:66,column:57}},"27":{start:{line:70,column:12},end:{line:70,column:31}},"28":{start:{line:71,column:12},end:{line:71,column:97}},"29":{start:{line:72,column:12},end:{line:72,column:49}},"30":{start:{line:74,column:8},end:{line:74,column:90}},"31":{start:{line:78,column:8},end:{line:78,column:26}},"32":{start:{line:82,column:0},end:{line:82,column:43}},"33":{start:{line:83,column:0},end:{line:83,column:45}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:18},end:{line:33,column:5}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:35,column:4},end:{line:35,column:5}},loc:{start:{line:35,column:33},end:{line:50,column:5}},line:35},"2":{name:"(anonymous_2)",decl:{start:{line:52,column:4},end:{line:52,column:5}},loc:{start:{line:52,column:34},end:{line:75,column:5}},line:52},"3":{name:"(anonymous_3)",decl:{start:{line:77,column:4},end:{line:77,column:5}},loc:{start:{line:77,column:13},end:{line:79,column:5}},line:77}},branchMap:{"0":{loc:{start:{line:36,column:20},end:{line:36,column:188}},type:"cond-expr",locations:[{start:{line:36,column:53},end:{line:36,column:83}},{start:{line:36,column:86},end:{line:36,column:188}}],line:36},"1":{loc:{start:{line:53,column:8},end:{line:55,column:9}},type:"if",locations:[{start:{line:53,column:8},end:{line:55,column:9}},{start:{line:53,column:8},end:{line:55,column:9}}],line:53},"2":{loc:{start:{line:61,column:12},end:{line:67,column:13}},type:"if",locations:[{start:{line:61,column:12},end:{line:67,column:13}},{start:{line:61,column:12},end:{line:67,column:13}}],line:61}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3648767bf0be1afbcbcd8e12fed49c2eb1b72399"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1qarz5kalb=function(){return actualCoverage;};}return actualCoverage;}cov_1qarz5kalb();// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
const{ComponentDialog,TextPrompt,WaterfallDialog}=(cov_1qarz5kalb().s[0]++,require('botbuilder-dialogs'));const{QnAMaker}=(cov_1qarz5kalb().s[1]++,require('botbuilder-ai'));const{MessageFactory}=(cov_1qarz5kalb().s[2]++,require('botbuilder'));const{ActionTypes}=(cov_1qarz5kalb().s[3]++,require("botframework-schema"));const ANSWER_DIALOG=(cov_1qarz5kalb().s[4]++,'ANSWER_DIALOG');const WATERFALL_DIALOG=(cov_1qarz5kalb().s[5]++,'WATERFALL_DIALOG');const TEXT_PROMPT=(cov_1qarz5kalb().s[6]++,'TEXT_PROMPT');class AnswerDialog extends ComponentDialog{constructor(){cov_1qarz5kalb().f[0]++;cov_1qarz5kalb().s[7]++;super(ANSWER_DIALOG);cov_1qarz5kalb().s[8]++;try{cov_1qarz5kalb().s[9]++;this.qnaMaker=new QnAMaker({knowledgeBaseId:'63a07915-3939-4f7e-845a-d8d4df62f969',endpointKey:'dbdf58ac-5aa6-484d-944c-1aba8572a210',host:'https://avabotqnamakerengine.azurewebsites.net/qnamaker'});}catch(err){cov_1qarz5kalb().s[10]++;console.warn(`QnAMaker Exception: ${err} Check your QnAMaker configuration in .env`);}cov_1qarz5kalb().s[11]++;this.addDialog(new TextPrompt(TEXT_PROMPT));cov_1qarz5kalb().s[12]++;this.addDialog(new WaterfallDialog(WATERFALL_DIALOG,[this.beginStep.bind(this),this.answerStep.bind(this)]));cov_1qarz5kalb().s[13]++;this.initialDialogId=WATERFALL_DIALOG;}async beginStep(stepContext){cov_1qarz5kalb().f[1]++;const msg=(cov_1qarz5kalb().s[14]++,stepContext.options.restartMsg?(cov_1qarz5kalb().b[0][0]++,stepContext.options.restartMsg):(cov_1qarz5kalb().b[0][1]++,'Welcome! You can go on ask questions, or click `quit` to quit the QnA mode whenever feeling like so.'));const cardActions=(cov_1qarz5kalb().s[15]++,[{type:ActionTypes.PostBack,title:"quit",value:"quit"}]);const message=(cov_1qarz5kalb().s[16]++,MessageFactory.suggestedActions(cardActions,msg));// Ask the user to enter their name.
cov_1qarz5kalb().s[17]++;return await stepContext.prompt(TEXT_PROMPT,message);}async answerStep(stepContext){cov_1qarz5kalb().f[2]++;cov_1qarz5kalb().s[18]++;if(stepContext.result=='quit'){cov_1qarz5kalb().b[1][0]++;cov_1qarz5kalb().s[19]++;return await stepContext.endDialog();}else{cov_1qarz5kalb().b[1][1]++;}cov_1qarz5kalb().s[20]++;console.log('Calling QnA Maker');cov_1qarz5kalb().s[21]++;try{const qnaResults=(cov_1qarz5kalb().s[22]++,await this.qnaMaker.getAnswers(stepContext.context));var msg=(cov_1qarz5kalb().s[23]++,'');// If an answer was received from QnA Maker, send the answer back to the user.
cov_1qarz5kalb().s[24]++;if(qnaResults[0]){cov_1qarz5kalb().b[2][0]++;cov_1qarz5kalb().s[25]++;msg=qnaResults[0].answer;// If no answers were returned from QnA Maker, reply with help.
}else{cov_1qarz5kalb().b[2][1]++;cov_1qarz5kalb().s[26]++;msg='No QnA Maker answers were found.';}}catch(error){cov_1qarz5kalb().s[27]++;console.log(error);cov_1qarz5kalb().s[28]++;await stepContext.context.sendActivity('Sorry, QnA maker is currently unavailable.');cov_1qarz5kalb().s[29]++;return await stepContext.endDialog();}cov_1qarz5kalb().s[30]++;return await stepContext.replaceDialog(this.initialDialogId,{restartMsg:msg});}set a(n){cov_1qarz5kalb().f[3]++;cov_1qarz5kalb().s[31]++;this.qnaMaker=n;}}cov_1qarz5kalb().s[32]++;module.exports.AnswerDialog=AnswerDialog;cov_1qarz5kalb().s[33]++;module.exports.ANSWER_DIALOG=ANSWER_DIALOG;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuc3dlckRpYWxvZy5qcyJdLCJuYW1lcyI6WyJDb21wb25lbnREaWFsb2ciLCJUZXh0UHJvbXB0IiwiV2F0ZXJmYWxsRGlhbG9nIiwicmVxdWlyZSIsIlFuQU1ha2VyIiwiTWVzc2FnZUZhY3RvcnkiLCJBY3Rpb25UeXBlcyIsIkFOU1dFUl9ESUFMT0ciLCJXQVRFUkZBTExfRElBTE9HIiwiVEVYVF9QUk9NUFQiLCJBbnN3ZXJEaWFsb2ciLCJjb25zdHJ1Y3RvciIsInFuYU1ha2VyIiwia25vd2xlZGdlQmFzZUlkIiwiZW5kcG9pbnRLZXkiLCJob3N0IiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJhZGREaWFsb2ciLCJiZWdpblN0ZXAiLCJiaW5kIiwiYW5zd2VyU3RlcCIsImluaXRpYWxEaWFsb2dJZCIsInN0ZXBDb250ZXh0IiwibXNnIiwib3B0aW9ucyIsInJlc3RhcnRNc2ciLCJjYXJkQWN0aW9ucyIsInR5cGUiLCJQb3N0QmFjayIsInRpdGxlIiwidmFsdWUiLCJtZXNzYWdlIiwic3VnZ2VzdGVkQWN0aW9ucyIsInByb21wdCIsInJlc3VsdCIsImVuZERpYWxvZyIsImxvZyIsInFuYVJlc3VsdHMiLCJnZXRBbnN3ZXJzIiwiY29udGV4dCIsImFuc3dlciIsImVycm9yIiwic2VuZEFjdGl2aXR5IiwicmVwbGFjZURpYWxvZyIsImEiLCJuIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjQ1SEFlWTsyRkFmWjtBQUNBO0FBRUEsS0FBTSxDQUFFQSxlQUFGLENBQW1CQyxVQUFuQixDQUErQkMsZUFBL0IsMkJBQW1EQyxPQUFPLENBQUMsb0JBQUQsQ0FBMUQsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsUUFBRiwyQkFBZUQsT0FBTyxDQUFDLGVBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUUsY0FBRiwyQkFBcUJGLE9BQU8sQ0FBQyxZQUFELENBQTVCLENBQU4sQ0FDQSxLQUFNLENBQUVHLFdBQUYsMkJBQWtCSCxPQUFPLENBQUMscUJBQUQs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QUEsV0FBVyxDQUFDYSxTQUFaLEVBQWIsQ0FDSCxDQXJCeUIseUJBc0IxQixNQUFPLE1BQU1iLENBQUFBLFdBQVcsQ0FBQ3FCLGFBQVosQ0FBMEIsS0FBS3RCLGVBQS9CLENBQWdELENBQUVJLFVBQVUsQ0FBRUYsR0FBZCxDQUFoRCxDQUFiLENBQ0gsQ0FFSSxHQUFEcUIsQ0FBQUEsQ0FBQyxDQUFDQyxDQUFELENBQUksa0RBQ0wsS0FBS25DLFFBQUwsQ0FBZ0JtQyxDQUFoQixDQUNILENBbEVzQyxDLHlCQXFFM0NDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFldkMsWUFBZixDQUE4QkEsWUFBOUIsQyx5QkFDQXNDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlMUMsYUFBZixDQUErQkEsYUFBL0IiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5cclxuY29uc3QgeyBDb21wb25lbnREaWFsb2csIFRleHRQcm9tcHQsIFdhdGVyZmFsbERpYWxvZyB9ID0gcmVxdWlyZSgnYm90YnVpbGRlci1kaWFsb2dzJyk7XHJcbmNvbnN0IHsgUW5BTWFrZXIgfSA9IHJlcXVpcmUoJ2JvdGJ1aWxkZXItYWknKTtcclxuY29uc3QgeyBNZXNzYWdlRmFjdG9yeSB9ID0gcmVxdWlyZSgnYm90YnVpbGRlcicpO1xyXG5jb25zdCB7IEFjdGlvblR5cGVzIH0gPSByZXF1aXJlKFwiYm90ZnJhbWV3b3JrLXNjaGVtYVwiKTtcclxuXHJcbmNvbnN0IEFOU1dFUl9ESUFMT0cgPSAnQU5TV0VSX0RJQUxPRyc7XHJcbmNvbnN0IFdBVEVSRkFMTF9ESUFMT0cgPSAnV0FURVJGQUxMX0RJQUxPRyc7XHJcbmNvbnN0IFRFWFRfUFJPTVBUID0gJ1RFWFRfUFJPTVBUJztcclxuXHJcbmNsYXNzIEFuc3dlckRpYWxvZyBleHRlbmRzIENvbXBvbmVudERpYWxvZyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihBTlNXRVJfRElBTE9HKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnFuYU1ha2VyID0gbmV3IFFuQU1ha2VyKHtcclxuICAgICAgICAgICAgICAgIGtub3dsZWRnZUJhc2VJZDogJzYzYTA3OTE1LTM5MzktNGY3ZS04NDVhLWQ4ZDRkZjYyZjk2OScsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludEtleTogJ2RiZGY1OGFjLTVhYTYtNDg0ZC05NDRjLTFhYmE4NTcyYTIxMCcsXHJcbiAgICAgICAgICAgICAgICBob3N0OiAnaHR0cHM6Ly9hdmFib3RxbmFtYWtlcmVuZ2luZS5henVyZXdlYnNpdGVzLm5ldC9xbmFtYWtlcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgUW5BTWFrZXIgRXhjZXB0aW9uOiAke2Vycn0gQ2hlY2sgeW91ciBRbkFNYWtlciBjb25maWd1cmF0aW9uIGluIC5lbnZgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWRkRGlhbG9nKG5ldyBUZXh0UHJvbXB0KFRFWFRfUFJPTVBUKSk7XHJcbiAgICAgICAgdGhpcy5hZGREaWFsb2cobmV3IFdhdGVyZmFsbERpYWxvZyhXQVRFUkZBTExfRElBTE9HLCBbXHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5TdGVwLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIHRoaXMuYW5zd2VyU3RlcC5iaW5kKHRoaXMpXHJcbiAgICAgICAgXSkpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxEaWFsb2dJZCA9IFdBVEVSRkFMTF9ESUFMT0c7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYmVnaW5TdGVwKHN0ZXBDb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgbXNnID0gc3RlcENvbnRleHQub3B0aW9ucy5yZXN0YXJ0TXNnID8gc3RlcENvbnRleHQub3B0aW9ucy5yZXN0YXJ0TXNnIDogJ1dlbGNvbWUhIFlvdSBjYW4gZ28gb24gYXNrIHF1ZXN0aW9ucywgb3IgY2xpY2sgYHF1aXRgIHRvIHF1aXQgdGhlIFFuQSBtb2RlIHdoZW5ldmVyIGZlZWxpbmcgbGlrZSBzby4nO1xyXG4gICAgICAgIGNvbnN0IGNhcmRBY3Rpb25zID0gW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiBBY3Rpb25UeXBlcy5Qb3N0QmFjayxcclxuICAgICAgICAgICAgdGl0bGU6IFwicXVpdFwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogXCJxdWl0XCIsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IE1lc3NhZ2VGYWN0b3J5LnN1Z2dlc3RlZEFjdGlvbnMoXHJcbiAgICAgICAgICBjYXJkQWN0aW9ucyxtc2dcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBBc2sgdGhlIHVzZXIgdG8gZW50ZXIgdGhlaXIgbmFtZS5cclxuICAgICAgICByZXR1cm4gYXdhaXQgc3RlcENvbnRleHQucHJvbXB0KFRFWFRfUFJPTVBULCBtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhbnN3ZXJTdGVwKHN0ZXBDb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKHN0ZXBDb250ZXh0LnJlc3VsdCA9PSAncXVpdCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN0ZXBDb250ZXh0LmVuZERpYWxvZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygnQ2FsbGluZyBRbkEgTWFrZXInKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBxbmFSZXN1bHRzID0gYXdhaXQgdGhpcy5xbmFNYWtlci5nZXRBbnN3ZXJzKHN0ZXBDb250ZXh0LmNvbnRleHQpO1xyXG4gICAgICAgICAgICB2YXIgbXNnID0gJyc7XHJcbiAgICAgICAgICAgIC8vIElmIGFuIGFuc3dlciB3YXMgcmVjZWl2ZWQgZnJvbSBRbkEgTWFrZXIsIHNlbmQgdGhlIGFuc3dlciBiYWNrIHRvIHRoZSB1c2VyLlxyXG4gICAgICAgICAgICBpZiAocW5hUmVzdWx0c1swXSkge1xyXG4gICAgICAgICAgICAgICAgbXNnID0gcW5hUmVzdWx0c1swXS5hbnN3ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gYW5zd2VycyB3ZXJlIHJldHVybmVkIGZyb20gUW5BIE1ha2VyLCByZXBseSB3aXRoIGhlbHAuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtc2cgPSAnTm8gUW5BIE1ha2VyIGFuc3dlcnMgd2VyZSBmb3VuZC4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgIGF3YWl0IHN0ZXBDb250ZXh0LmNvbnRleHQuc2VuZEFjdGl2aXR5KCdTb3JyeSwgUW5BIG1ha2VyIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN0ZXBDb250ZXh0LmVuZERpYWxvZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXdhaXQgc3RlcENvbnRleHQucmVwbGFjZURpYWxvZyh0aGlzLmluaXRpYWxEaWFsb2dJZCwgeyByZXN0YXJ0TXNnOiBtc2cgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGEobikge1xyXG4gICAgICAgIHRoaXMucW5hTWFrZXIgPSBuO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5BbnN3ZXJEaWFsb2cgPSBBbnN3ZXJEaWFsb2c7XHJcbm1vZHVsZS5leHBvcnRzLkFOU1dFUl9ESUFMT0cgPSBBTlNXRVJfRElBTE9HOyJdfQ==